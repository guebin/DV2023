<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.322">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="최규빈">
<meta name="dcterms.date" content="2023-10-30">

<title>DV2023 - 09wk-1: 중간고사</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">DV2023</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/guebin/DV2023"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/channel/UCQk9RyBNgXc7ORIsYlOfQrg/playlists?view=50&amp;sort=dd&amp;shelf_id=2"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#에너지사용량-80점" id="toc-에너지사용량-80점" class="nav-link active" data-scroll-target="#에너지사용량-80점">1. 에너지사용량 – 80점</a>
  <ul class="collapse">
  <li><a href="#에너지-사용-추세-10점" id="toc-에너지-사용-추세-10점" class="nav-link" data-scroll-target="#에너지-사용-추세-10점"><code>(1)</code> 에너지 사용 추세 – 10점</a></li>
  <li><a href="#에너지-종류별-사용-추세-10점" id="toc-에너지-종류별-사용-추세-10점" class="nav-link" data-scroll-target="#에너지-종류별-사용-추세-10점"><code>(2)</code> 에너지 종류별 사용 추세 – 10점</a></li>
  <li><a href="#년-대비-2021년의-전기에너지-사용량-증가-20점" id="toc-년-대비-2021년의-전기에너지-사용량-증가-20점" class="nav-link" data-scroll-target="#년-대비-2021년의-전기에너지-사용량-증가-20점"><code>(3)</code> 2020년 대비 2021년의 전기에너지 사용량 증가 – 20점</a></li>
  <li><a href="#건물당-에너지-소비량-연도별-상위-15구-비교-20점" id="toc-건물당-에너지-소비량-연도별-상위-15구-비교-20점" class="nav-link" data-scroll-target="#건물당-에너지-소비량-연도별-상위-15구-비교-20점"><code>(4)</code> 건물당 에너지 소비량: 연도별 상위 15구 비교 – 20점</a></li>
  <li><a href="#수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점" id="toc-수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점" class="nav-link" data-scroll-target="#수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점"><code>(5)</code> 수도권과 비수도권의 전기 에너지 사용량 및 사용 비율 – 20점</a></li>
  </ul></li>
  <li><a href="#fifa-90점" id="toc-fifa-90점" class="nav-link" data-scroll-target="#fifa-90점">2. FIFA – 90점</a>
  <ul class="collapse">
  <li><a href="#나이와-포지션에-따른-선수-가치-및-급여-분석-10점" id="toc-나이와-포지션에-따른-선수-가치-및-급여-분석-10점" class="nav-link" data-scroll-target="#나이와-포지션에-따른-선수-가치-및-급여-분석-10점"><code>(1)</code> 나이와 포지션에 따른 선수 가치 및 급여 분석 – 10점</a></li>
  <li><a href="#골키퍼-능력치별-로그급여-추세-10점" id="toc-골키퍼-능력치별-로그급여-추세-10점" class="nav-link" data-scroll-target="#골키퍼-능력치별-로그급여-추세-10점"><code>(2)</code> 골키퍼 능력치별 로그급여 추세 – 10점</a></li>
  <li><a href="#gkability에-따른-골키퍼의-overall-예측-20점" id="toc-gkability에-따른-골키퍼의-overall-예측-20점" class="nav-link" data-scroll-target="#gkability에-따른-골키퍼의-overall-예측-20점"><code>(3)</code> “GKAbility”에 따른 골키퍼의 Overall 예측 – 20점</a></li>
  <li><a href="#포워드와-수비수의-기술별-가치-평가-25점" id="toc-포워드와-수비수의-기술별-가치-평가-25점" class="nav-link" data-scroll-target="#포워드와-수비수의-기술별-가치-평가-25점"><code>(4)</code> 포워드와 수비수의 기술별 가치 평가 – 25점</a></li>
  <li><a href="#스킬-카테고리별-선수의-로그-연봉-분석-25점" id="toc-스킬-카테고리별-선수의-로그-연봉-분석-25점" class="nav-link" data-scroll-target="#스킬-카테고리별-선수의-로그-연봉-분석-25점"><code>(5)</code> 스킬 카테고리별 선수의 로그 연봉 분석 – 25점</a></li>
  </ul></li>
  <li><a href="#시각화의-해석-30점" id="toc-시각화의-해석-30점" class="nav-link" data-scroll-target="#시각화의-해석-30점">3. 시각화의 해석 – 30점</a>
  <ul class="collapse">
  <li><a href="#심슨의-역설-10점" id="toc-심슨의-역설-10점" class="nav-link" data-scroll-target="#심슨의-역설-10점"><code>(1)</code> 심슨의 역설 – 10점</a></li>
  <li><a href="#histogram-equalization-5점" id="toc-histogram-equalization-5점" class="nav-link" data-scroll-target="#histogram-equalization-5점"><code>(2)</code> Histogram Equalization – 5점</a></li>
  <li><a href="#엔스콤의-플랏-5점" id="toc-엔스콤의-플랏-5점" class="nav-link" data-scroll-target="#엔스콤의-플랏-5점"><code>(3)</code> 엔스콤의 플랏 – 5점</a></li>
  <li><a href="#아이스크림을-많이-먹으면-걸리는-병-5점" id="toc-아이스크림을-많이-먹으면-걸리는-병-5점" class="nav-link" data-scroll-target="#아이스크림을-많이-먹으면-걸리는-병-5점"><code>(4)</code> 아이스크림을 많이 먹으면 걸리는 병 – 5점</a></li>
  <li><a href="#산점도의-해석들-5점" id="toc-산점도의-해석들-5점" class="nav-link" data-scroll-target="#산점도의-해석들-5점"><code>(5)</code> 산점도의 해석들 – 5점</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="09wk-1-mid.out.ipynb" download="09wk-1-mid.out.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">09wk-1: 중간고사</h1>
  <div class="quarto-categories">
    <div class="quarto-category">plotnine</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>최규빈 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 30, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>

<div id="b08513a7-b0a8-4203-bef4-98eb5bdf7276" class="cell" data-tags="[]" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> PIL</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> io </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cv2 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="에너지사용량-80점" class="level1 page-columns page-full">
<h1>1. 에너지사용량 – 80점</h1>
<p>아래는 2019년 서울의 에너지사용량을 불러오는 예시코드이다.</p>
<div id="645489f9-745a-4a5f-bbe0-f387baef3374" class="cell" data-tags="[]" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pd.read_csv(<span class="st">'https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2019.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">지역</th>
<th data-quarto-table-cell-role="th">건물동수</th>
<th data-quarto-table-cell-role="th">연면적</th>
<th data-quarto-table-cell-role="th">에너지사용량(TOE)/전기</th>
<th data-quarto-table-cell-role="th">에너지사용량(TOE)/도시가스</th>
<th data-quarto-table-cell-role="th">에너지사용량(TOE)/지역난방</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>종로구</td>
<td>17,851</td>
<td>9,204,140</td>
<td>63,492</td>
<td>76,653</td>
<td>799</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>중구</td>
<td>10,383</td>
<td>10,078,848</td>
<td>79,223</td>
<td>68,210</td>
<td>497</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>용산구</td>
<td>17,138</td>
<td>10,756,612</td>
<td>51,229</td>
<td>79,805</td>
<td>11,128</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>성동구</td>
<td>13,980</td>
<td>11,804,313</td>
<td>59,832</td>
<td>99,986</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>광진구</td>
<td>21,556</td>
<td>12,272,738</td>
<td>68,756</td>
<td>123,447</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>동대문구</td>
<td>21,794</td>
<td>12,664,554</td>
<td>65,913</td>
<td>111,420</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>중랑구</td>
<td>23,950</td>
<td>15,182,802</td>
<td>59,370</td>
<td>109,284</td>
<td>7,442</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>성북구</td>
<td>27,112</td>
<td>15,938,807</td>
<td>77,007</td>
<td>148,376</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>강북구</td>
<td>23,334</td>
<td>9,458,987</td>
<td>47,731</td>
<td>100,045</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>도봉구</td>
<td>13,168</td>
<td>10,644,704</td>
<td>44,985</td>
<td>90,379</td>
<td>5,268</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>노원구</td>
<td>9,704</td>
<td>17,197,086</td>
<td>77,010</td>
<td>94,340</td>
<td>50,859</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>은평구</td>
<td>25,200</td>
<td>14,735,131</td>
<td>75,914</td>
<td>130,159</td>
<td>14,370</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>서대문구</td>
<td>17,651</td>
<td>12,559,425</td>
<td>65,164</td>
<td>111,542</td>
<td>6,330</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>마포구</td>
<td>18,844</td>
<td>15,024,186</td>
<td>92,453</td>
<td>114,931</td>
<td>20,148</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>양천구</td>
<td>14,690</td>
<td>15,428,339</td>
<td>70,721</td>
<td>82,857</td>
<td>49,258</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>강서구</td>
<td>20,446</td>
<td>20,641,866</td>
<td>86,809</td>
<td>128,786</td>
<td>35,896</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>구로구</td>
<td>17,204</td>
<td>13,509,894</td>
<td>59,916</td>
<td>120,457</td>
<td>2,963</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>금천구</td>
<td>12,135</td>
<td>7,420,441</td>
<td>34,791</td>
<td>69,814</td>
<td>732</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>영등포구</td>
<td>18,133</td>
<td>14,914,027</td>
<td>87,480</td>
<td>114,238</td>
<td>13,531</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>동작구</td>
<td>20,102</td>
<td>13,612,946</td>
<td>66,811</td>
<td>132,285</td>
<td>899</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>관악구</td>
<td>26,460</td>
<td>14,997,859</td>
<td>85,416</td>
<td>158,543</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>서초구</td>
<td>12,856</td>
<td>21,560,285</td>
<td>135,491</td>
<td>121,437</td>
<td>38,866</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>강남구</td>
<td>16,129</td>
<td>29,961,585</td>
<td>180,121</td>
<td>149,045</td>
<td>83,459</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>송파구</td>
<td>19,331</td>
<td>26,573,343</td>
<td>139,117</td>
<td>143,601</td>
<td>71,954</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>강동구</td>
<td>16,636</td>
<td>15,048,315</td>
<td>70,341</td>
<td>121,931</td>
<td>11,921</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>에너지 사용량은 2018년부터 2021년까지의 기간 동안 서울, 부산 등 여러 지역에 대해 정리되어 있으며, 아래 주소 형식으로 저장되어 있다.</p>
<pre><code>https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2018.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2019.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2020.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2021.csv
...
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2018.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2019.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2020.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2021.csv</code></pre>
<p>아래의 <code>url</code>, <code>prov</code>를 참고하여 모든 자료를 불러온 뒤 <code>pd.concat()</code>을 이용하여 하나의 df로 합쳐라.</p>
<div id="bd4e758c-b243-416f-82ad-a91cd93284ab" class="cell" data-tags="[]" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/</span><span class="sc">{}</span><span class="st">.csv'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>prov <span class="op">=</span> [<span class="st">'Seoul'</span>, <span class="st">'Busan'</span>, <span class="st">'Daegu'</span>, <span class="st">'Incheon'</span>, </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Gwangju'</span>, <span class="st">'Daejeon'</span>, <span class="st">'Ulsan'</span>, <span class="st">'Sejongsi'</span>, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Gyeonggi-do'</span>, <span class="st">'Gangwon-do'</span>, <span class="st">'Chungcheongbuk-do'</span>, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Chungcheongnam-do'</span>, <span class="st">'Jeollabuk-do'</span>, <span class="st">'Jeollanam-do'</span>, </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Gyeongsangbuk-do'</span>, <span class="st">'Gyeongsangnam-do'</span>, <span class="st">'Jeju-do'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>의미상 숫자형이지만 문자형으로 입력이된 자료를 모두 전처리하고, 아래의 딕셔너리를 이용하여 열의 이름을 변환하라.</p>
<div id="7ae97edf-8b68-4408-a2fd-15da95b6369a" class="cell" data-tags="[]" data-execution_count="46">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>name_dict <span class="op">=</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'년도'</span>: <span class="st">'Year'</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'시도'</span>: <span class="st">'Prov'</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'지역'</span>: <span class="st">'Reg'</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'건물동수'</span>: <span class="st">'BldgCount'</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'연면적'</span>: <span class="st">'Area'</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'에너지사용량(TOE)/전기'</span>: <span class="st">'Elec'</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'에너지사용량(TOE)/도시가스'</span>: <span class="st">'Gas'</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'에너지사용량(TOE)/지역난방'</span>: <span class="st">'Heat'</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>올바르게 정리된 데이터프레임의 예시는 아래와 같다.</p>
<p><img src="09wk-1-mid_files/figure-html/004b1561-710c-4fb0-9aa9-fc4f066dd533-1-fb277eb0-4784-41ef-b810-0bba510e98d9.png" class="img-fluid"></p>
<section id="에너지-사용-추세-10점" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="에너지-사용-추세-10점"><code>(1)</code> 에너지 사용 추세 – 10점</h2>
<p>2018년부터 2021년까지 에너지사용량을 dot-connected plot으로 시각화 하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/2b70d6a1-3d92-4ef5-88e0-c40f944590ad-1-14954b76-40f1-49d0-960c-ee9b5e5bc194.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. plotnine으로 생성된 <code>fig</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>에 <code>.draw()</code>메소드를 사용하여 <code>matplotlib.figure.Figure</code> 자료형으로 변환할것</p>
<div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;type이 <code>plotnine.ggplot.ggplot</code> 인 오브젝트</p></li></div><p><code>2</code>. 변환된 자료형에 <code>fig.suptitle()</code> method를 사용하여 제목을 설정할것.</p>
</section>
<section id="에너지-종류별-사용-추세-10점" class="level2">
<h2 class="anchored" data-anchor-id="에너지-종류별-사용-추세-10점"><code>(2)</code> 에너지 종류별 사용 추세 – 10점</h2>
<p>2018년부터 2021년까지 에너지사용량을 dot-connected plot으로 시각화 하라. 에너지의 유형은 색상으로 구분하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/f11798f6-1c02-4b00-8b6d-c89cb7d43688-1-299d0f6a-136e-450e-8e1c-86518f79a688.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code> <code>geom_point</code>의 color와 shape을 <code>EneryType</code>으로 설정할 것.</p>
<p><code>2</code> <code>geom_line</code>의 color와 linetype을 <code>EneryType</code>으로 설정할 것</p>
</section>
<section id="년-대비-2021년의-전기에너지-사용량-증가-20점" class="level2">
<h2 class="anchored" data-anchor-id="년-대비-2021년의-전기에너지-사용량-증가-20점"><code>(3)</code> 2020년 대비 2021년의 전기에너지 사용량 증가 – 20점</h2>
<p>2020년 대비 2021년의 전기에너지 사용량이 증가한 상위 5개의 지역을 아래와 같이 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/0c574030-a78b-4114-a237-333a65d05cd0-1-9bceaea8-1b44-48dd-8791-f544a0e05443.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. 2020년 대비 2021년의 전기에너지 사용 증가량은 아래와 같이 구한다.</p>
<p><span class="math display">\[\text{서울의 전기에너지 사용 증가량} = \frac{\text{2021년 강남구의 전기에너지 사용량} + \dots + \text{2021년 중랑구의 전기에너지 사용량}}{\text{2020년 강남구의 전기에너지 사용량} + \dots + \text{2020년 중랑구의 전기에너지 사용량}}\]</span></p>
<p><code>2</code>. 전기에너지의 사용량이 증가한 상위5개의 지역 중 가장 많이 증가한 2개의 지역은 색깔과 투명도로 하이라이팅 한다. (구체적 코드는 hint를 참고할 것)</p>
<p><strong>힌트</strong></p>
<p><code>-</code> 정리된 자료의 형태는 아래와 같아야 한다.</p>
<p><img src="09wk-1-mid_files/figure-html/8c5895ac-dbe0-4f3a-904e-80ecb28d20f3-1-f0e6e145-0fa8-4edf-b60b-d16e034ebf4d.png" class="img-fluid"></p>
<p><code>-</code> 그림안에 text를 넣기위해서 <code>geom_text</code>를 시용한다. 위의 데이터가 정리되었다는 전제하에 구체적인 시각화 코드는 아래와 같다.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">'Rank&lt;5'</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'Rank'</span>,y<span class="op">=</span><span class="st">'ElecUseInc'</span>,fill<span class="op">=</span><span class="st">'Top2'</span>,alpha<span class="op">=</span><span class="st">'Top2'</span>))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> geom_text(aes(x<span class="op">=</span><span class="st">'Rank'</span>,y<span class="op">=</span><span class="st">'ElecUseInc'</span>,label<span class="op">=</span><span class="st">'Prov'</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> col <span class="op">+</span> text <span class="op">+</span> scale_alpha_manual(values<span class="op">=</span>{<span class="va">True</span>: <span class="dv">1</span>, <span class="va">False</span>: <span class="fl">0.2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="건물당-에너지-소비량-연도별-상위-15구-비교-20점" class="level2">
<h2 class="anchored" data-anchor-id="건물당-에너지-소비량-연도별-상위-15구-비교-20점"><code>(4)</code> 건물당 에너지 소비량: 연도별 상위 15구 비교 – 20점</h2>
<p>건물당 에너지소비량이 가장 큰 15개의 구를 연도별로 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/36b28dc5-19cc-4afa-9d72-0d0500a1df2e-1-f810b499-1c3d-4072-8fae-e81222ea1836.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. 건물당 에너지 사용량(=EUB)을 아래와 같은 방식으로 구할 것</p>
<p><span class="math display">\[\text{EUB}_{강남구,2018}=\frac{\text{강남구의 2018년도 전기에너지 사용량}+ \text{강남구의 2018년도 도시가스 사용량} +\text{강남구의 2018년도 지역난방 사용량}}{\text{강남구의 2018년도 건물동수}}\]</span></p>
<p><code>2</code>. 연도별로 EUB가 높은 15개의 구를 정렬할 것. (따라서 매년도마다 순위가 다를수 있음)</p>
</section>
<section id="수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점" class="level2">
<h2 class="anchored" data-anchor-id="수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점"><code>(5)</code> 수도권과 비수도권의 전기 에너지 사용량 및 사용 비율 – 20점</h2>
<p>수도권과 비수도권의 전기에너지 사용량 및 사용비율을 계산하고 시각화 하라.</p>
<p><strong>시각화예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/1c2c70ae-ee49-4e6a-ab64-b08b478bf244-1-439a5b7e-814a-424f-a345-14fffcb42f6a.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>['Seoul','Gyeonggi-do','Incheon']</code>은 수도권으로 그 외의 지역은 비수도권으로 분리한다.</p>
<p><code>2</code>. 수도권의 전기에너지 사용비율은 아래와 같이 구한다.</p>
<p><span class="math display">\[\text{2018년 수도권의 전기에너지 사용비율} = \frac{\text{2018년 수도권의 전기 사용량}}{\text{2018년 수도권의 전기 사용량}+\text{2018년 수도권의 도시가스 사용량}+\text{2018년 수도권의 지역난방 사용량}}\]</span></p>
<p><code>3</code>. <code>facet_wrap</code> 사용시 <code>scales='free'</code> 옵션을 사용할 것</p>
</section>
</section>
<section id="fifa-90점" class="level1">
<h1>2. FIFA – 90점</h1>
<p>아래는 FIFA22 자료를 불러오는 코드이다.</p>
<div id="641ed4ec-b388-44b2-9d23-96f164dc9605" class="cell" data-tags="[]" data-execution_count="80">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/guebin/DV2021/master/_notebooks/2021-10-25-FIFA22_official_data.csv'</span>).drop([<span class="st">'Loaned From'</span>,<span class="st">'Marking'</span>],axis<span class="op">=</span><span class="dv">1</span>).dropna()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ID</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Age</th>
<th data-quarto-table-cell-role="th">Photo</th>
<th data-quarto-table-cell-role="th">Nationality</th>
<th data-quarto-table-cell-role="th">Flag</th>
<th data-quarto-table-cell-role="th">Overall</th>
<th data-quarto-table-cell-role="th">Potential</th>
<th data-quarto-table-cell-role="th">Club</th>
<th data-quarto-table-cell-role="th">Club Logo</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">SlidingTackle</th>
<th data-quarto-table-cell-role="th">GKDiving</th>
<th data-quarto-table-cell-role="th">GKHandling</th>
<th data-quarto-table-cell-role="th">GKKicking</th>
<th data-quarto-table-cell-role="th">GKPositioning</th>
<th data-quarto-table-cell-role="th">GKReflexes</th>
<th data-quarto-table-cell-role="th">Best Position</th>
<th data-quarto-table-cell-role="th">Best Overall Rating</th>
<th data-quarto-table-cell-role="th">Release Clause</th>
<th data-quarto-table-cell-role="th">DefensiveAwareness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>212198</td>
<td>Bruno Fernandes</td>
<td>26</td>
<td>https://cdn.sofifa.com/players/212/198/22_60.png</td>
<td>Portugal</td>
<td>https://cdn.sofifa.com/flags/pt.png</td>
<td>88</td>
<td>89</td>
<td>Manchester United</td>
<td>https://cdn.sofifa.com/teams/11/30.png</td>
<td>...</td>
<td>65.0</td>
<td>12.0</td>
<td>14.0</td>
<td>15.0</td>
<td>8.0</td>
<td>14.0</td>
<td>CAM</td>
<td>88.0</td>
<td>€206.9M</td>
<td>72.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>209658</td>
<td>L. Goretzka</td>
<td>26</td>
<td>https://cdn.sofifa.com/players/209/658/22_60.png</td>
<td>Germany</td>
<td>https://cdn.sofifa.com/flags/de.png</td>
<td>87</td>
<td>88</td>
<td>FC Bayern München</td>
<td>https://cdn.sofifa.com/teams/21/30.png</td>
<td>...</td>
<td>77.0</td>
<td>13.0</td>
<td>8.0</td>
<td>15.0</td>
<td>11.0</td>
<td>9.0</td>
<td>CM</td>
<td>87.0</td>
<td>€160.4M</td>
<td>74.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>176580</td>
<td>L. Suárez</td>
<td>34</td>
<td>https://cdn.sofifa.com/players/176/580/22_60.png</td>
<td>Uruguay</td>
<td>https://cdn.sofifa.com/flags/uy.png</td>
<td>88</td>
<td>88</td>
<td>Atlético de Madrid</td>
<td>https://cdn.sofifa.com/teams/240/30.png</td>
<td>...</td>
<td>38.0</td>
<td>27.0</td>
<td>25.0</td>
<td>31.0</td>
<td>33.0</td>
<td>37.0</td>
<td>ST</td>
<td>88.0</td>
<td>€91.2M</td>
<td>42.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>192985</td>
<td>K. De Bruyne</td>
<td>30</td>
<td>https://cdn.sofifa.com/players/192/985/22_60.png</td>
<td>Belgium</td>
<td>https://cdn.sofifa.com/flags/be.png</td>
<td>91</td>
<td>91</td>
<td>Manchester City</td>
<td>https://cdn.sofifa.com/teams/10/30.png</td>
<td>...</td>
<td>53.0</td>
<td>15.0</td>
<td>13.0</td>
<td>5.0</td>
<td>10.0</td>
<td>13.0</td>
<td>CM</td>
<td>91.0</td>
<td>€232.2M</td>
<td>68.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>224334</td>
<td>M. Acuña</td>
<td>29</td>
<td>https://cdn.sofifa.com/players/224/334/22_60.png</td>
<td>Argentina</td>
<td>https://cdn.sofifa.com/flags/ar.png</td>
<td>84</td>
<td>84</td>
<td>Sevilla FC</td>
<td>https://cdn.sofifa.com/teams/481/30.png</td>
<td>...</td>
<td>82.0</td>
<td>8.0</td>
<td>14.0</td>
<td>13.0</td>
<td>13.0</td>
<td>14.0</td>
<td>LB</td>
<td>84.0</td>
<td>€77.7M</td>
<td>80.0</td>
</tr>
</tbody>
</table>

<p>5 rows × 63 columns</p>
</div>
</div>
</div>
<p>아래의 딕셔너리를 이용하여 <code>Position</code>열을 변환하고 물음에 답하라.</p>
<div id="3e5c2967-e0cd-47ce-8510-b422a72e9868" class="cell" data-tags="[]" data-execution_count="29">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>position_dict <span class="op">=</span> {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'GOALKEEPER'</span>:{<span class="st">'GK'</span>},</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'DEFENDER'</span>:{<span class="st">'CB'</span>,<span class="st">'RCB'</span>,<span class="st">'LCB'</span>,<span class="st">'RB'</span>,<span class="st">'LB'</span>,<span class="st">'RWB'</span>,<span class="st">'LWB'</span>},</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'MIDFIELDER'</span>:{<span class="st">'CM'</span>,<span class="st">'RCM'</span>,<span class="st">'LCM'</span>,<span class="st">'CDM'</span>,<span class="st">'RDM'</span>,<span class="st">'LDM'</span>,<span class="st">'CAM'</span>,<span class="st">'RAM'</span>,<span class="st">'LAM'</span>,<span class="st">'RM'</span>,<span class="st">'LM'</span>},</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'FORWARD'</span>:{<span class="st">'ST'</span>,<span class="st">'CF'</span>,<span class="st">'RF'</span>,<span class="st">'LF'</span>,<span class="st">'RW'</span>,<span class="st">'LW'</span>,<span class="st">'RS'</span>,<span class="st">'LS'</span>},</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'SUB'</span>:{<span class="st">'SUB'</span>},</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'RES'</span>:{<span class="st">'RES'</span>}</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>position_dict</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>{'GOALKEEPER': {'GK'},
 'DEFENDER': {'CB', 'LB', 'LCB', 'LWB', 'RB', 'RCB', 'RWB'},
 'MIDFIELDER': {'CAM',
  'CDM',
  'CM',
  'LAM',
  'LCM',
  'LDM',
  'LM',
  'RAM',
  'RCM',
  'RDM',
  'RM'},
 'FORWARD': {'CF', 'LF', 'LS', 'LW', 'RF', 'RS', 'RW', 'ST'},
 'SUB': {'SUB'},
 'RES': {'RES'}}</code></pre>
</div>
</div>
<section id="나이와-포지션에-따른-선수-가치-및-급여-분석-10점" class="level2">
<h2 class="anchored" data-anchor-id="나이와-포지션에-따른-선수-가치-및-급여-분석-10점"><code>(1)</code> 나이와 포지션에 따른 선수 가치 및 급여 분석 – 10점</h2>
<p>나이에 따른 선수가치(Value)와 급여(Wage)의 산점도를 포지션별로 시각화 하고 추세선을 그려라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/0e7e3fca-f670-46f9-880a-65a145e9afeb-1-04a2b95a-8032-448f-9092-37bd1419e808.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>Value</code>와 <code>Wage</code>는 log값을 취하여 시각화 하라.</p>
<p><code>2</code>. <code>geom_point</code>를 사용할 시<code>alpha=0.2</code>, <code>size=0.1</code>, <code>position='jitter'</code>로 설정하라.</p>
</section>
<section id="골키퍼-능력치별-로그급여-추세-10점" class="level2">
<h2 class="anchored" data-anchor-id="골키퍼-능력치별-로그급여-추세-10점"><code>(2)</code> 골키퍼 능력치별 로그급여 추세 – 10점</h2>
<p>아래의 리스트는 골키퍼와 관련된 능력치이다.</p>
<div id="33ce5daf-8c87-4e49-a7ee-30809810cd67" class="cell" data-tags="[]" data-execution_count="74">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>gkstats <span class="op">=</span> [<span class="st">'GKDiving'</span>,<span class="st">'GKHandling'</span>, <span class="st">'GKKicking'</span>, <span class="st">'GKPositioning'</span>, <span class="st">'GKReflexes'</span>]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>gkstats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>['GKDiving', 'GKHandling', 'GKKicking', 'GKPositioning', 'GKReflexes']</code></pre>
</div>
</div>
<p><code>gkstats</code> 에 해당하는 능력치와 로그급여(<code>logWage</code>)를 산점도로 시각화하고 추세선을 추가하라.</p>
<p><strong>시각화예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/f7a6d528-64d8-4b22-bef9-ba12cd7c77ee-1-08cd6207-bce2-4c72-a761-cdc1d92a3178.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. 포지션이 “골키퍼”인 선수에 한정하여 시각화 할 것</p>
<p><code>2</code>. <code>geom_point</code>를 사용할 시 <code>alpha=0.5</code>,<code>size=0.5</code>,<code>position='jitter'</code> 를 설정하라.</p>
</section>
<section id="gkability에-따른-골키퍼의-overall-예측-20점" class="level2">
<h2 class="anchored" data-anchor-id="gkability에-따른-골키퍼의-overall-예측-20점"><code>(3)</code> “GKAbility”에 따른 골키퍼의 Overall 예측 – 20점</h2>
<p>아래의 리스트는 골키퍼와 관련된 능력치이다.</p>
<div id="f7897087-8c46-4855-808a-5a5add1db199" class="cell" data-tags="[]" data-execution_count="74">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>gkstats <span class="op">=</span> [<span class="st">'GKDiving'</span>,<span class="st">'GKHandling'</span>, <span class="st">'GKKicking'</span>, <span class="st">'GKPositioning'</span>, <span class="st">'GKReflexes'</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>gkstats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>['GKDiving', 'GKHandling', 'GKKicking', 'GKPositioning', 'GKReflexes']</code></pre>
</div>
</div>
<p><code>gkstats</code> 에 해당하는 능력치의 평균을 계산하고 <code>GKAbility</code>라는 변수에 저장하라. 골키퍼 포지션과 공격수 포지션을 가지는 선수들에 한정하여 <code>GKAbility</code>와 <code>OveraAll</code>(=선수의 전반적 능력치)의 관계를 산점도로 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/0efc6414-c5b7-4185-9761-438beb9d8826-1-1fddf3ad-2408-4dd8-9736-84baa944b336.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>ID=212198</code>인 선수 <code>Bruno Fernandes</code>의 경우 <code>GKAbility</code>를 아래와 같이 계산할 수 있다.</p>
<p><span class="math display">\[\text{Bruno Fernandes의 GKAbility} = \frac{\text{Bruno Fernandes의 GKDiving} + \dots + \text{Bruno Fernandes의 GKReflexes}}{5}\]</span></p>
<p><code>2</code>. 시각화를 위한 세부옵션은 아래의 코드를 참고하라.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'GKAbility'</span>,y<span class="op">=</span><span class="st">'Overall'</span>,size<span class="op">=</span><span class="st">'logWage'</span>,alpha<span class="op">=</span><span class="st">'logWage'</span>,color<span class="op">=</span><span class="st">'Position'</span>),position<span class="op">=</span><span class="st">'jitter'</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'GKAbility'</span>,y<span class="op">=</span><span class="st">'Overall'</span>),linetype<span class="op">=</span><span class="st">'dashed'</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'Position'</span>,scales<span class="op">=</span><span class="st">'free'</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="포워드와-수비수의-기술별-가치-평가-25점" class="level2">
<h2 class="anchored" data-anchor-id="포워드와-수비수의-기술별-가치-평가-25점"><code>(4)</code> 포워드와 수비수의 기술별 가치 평가 – 25점</h2>
<p>아래는 축구선수의 능력치와 관련이 있는 column들의 리스트이다. (골키퍼 관련 능력치는 제외하였음)</p>
<div id="3143913c-b295-4107-93b1-d37eabfa356d" class="cell" data-tags="[]" data-execution_count="100">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>abilities_list <span class="op">=</span> [<span class="st">'Crossing'</span>, <span class="st">'Finishing'</span>, <span class="st">'HeadingAccuracy'</span>, <span class="st">'ShortPassing'</span>, <span class="st">'Volleys'</span>, <span class="st">'Dribbling'</span>, <span class="st">'Curve'</span>, <span class="st">'FKAccuracy'</span>, <span class="st">'LongPassing'</span>, <span class="st">'BallControl'</span>, <span class="st">'Acceleration'</span>, <span class="st">'SprintSpeed'</span>, <span class="st">'Agility'</span>, <span class="st">'Reactions'</span>, <span class="st">'Balance'</span>, <span class="st">'ShotPower'</span>, <span class="st">'Jumping'</span>, <span class="st">'Stamina'</span>, <span class="st">'Strength'</span>, <span class="st">'LongShots'</span>, <span class="st">'Aggression'</span>, <span class="st">'Interceptions'</span>, <span class="st">'Positioning'</span>, <span class="st">'Vision'</span>, <span class="st">'Penalties'</span>, <span class="st">'Composure'</span>, <span class="st">'StandingTackle'</span>, <span class="st">'SlidingTackle'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>아래는 위의 <code>abilities_list</code>을 적당한 카테고리로 묶은 것이다.</p>
<div id="71a844b1-d137-49c4-92bb-26dd70c6cf3b" class="cell" data-tags="[]" data-execution_count="101">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>abilities_categories <span class="op">=</span> {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FinishingSkills"</span>: [<span class="st">'Finishing'</span>, <span class="st">'HeadingAccuracy'</span>, <span class="st">'Volleys'</span>, <span class="st">'LongShots'</span>, <span class="st">'Positioning'</span>, <span class="st">'Vision'</span>, <span class="st">'Penalties'</span>, <span class="st">'ShotPower'</span>, <span class="st">'Jumping'</span>],</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BallControl_Passing"</span>: [<span class="st">'Dribbling'</span>, <span class="st">'Curve'</span>, <span class="st">'Crossing'</span>,<span class="st">'ShortPassing'</span>, <span class="st">'LongPassing'</span>, <span class="st">'BallControl'</span>,<span class="st">'FKAccuracy'</span>],</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Speed_Stamina"</span>: [<span class="st">'Acceleration'</span>, <span class="st">'SprintSpeed'</span>, <span class="st">'Agility'</span>, <span class="st">'Stamina'</span>],</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Reactions_PhysicalAttributes"</span>: [<span class="st">'Reactions'</span>, <span class="st">'Balance'</span>, <span class="st">'Strength'</span>, <span class="st">'Composure'</span>],</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DefensiveSkills"</span>: [<span class="st">'Aggression'</span>, <span class="st">'Interceptions'</span>, <span class="st">'StandingTackle'</span>, <span class="st">'SlidingTackle'</span>]</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>선수들의 여러 능력치를 <code>abilities_categories</code>에 따라 통합하고 각 스킬 카테고리별로 선수의 능력치의 평균을 구하여 <code>SkillValueCategories</code>값에 저장하라. 정리된 자료의 예시는 아래와 같다.</p>
<p><img src="09wk-1-mid_files/figure-html/c9f24126-80dc-4096-b143-3e3fb3adb1c5-1-46ff6bfd-875c-40d3-b9d9-a7f795d896fa.png" class="img-fluid"></p>
<p>위의 자료를 바탕으로 <code>SkillValueCategories</code>와 <code>logValue</code>의 산점도를 포지션별로 시각화 하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/e01790f8-4fcb-4ea0-9b7d-46cf24d54732-1-8c1061cd-273c-432b-b288-eb5e1eedb86b.png" class="img-fluid"></p>
<p><strong>힌트</strong></p>
<p><code>-</code> 아래의 데이터프레임에서</p>
<p><img src="09wk-1-mid_files/figure-html/9d306dd2-e865-4c95-9631-c46aaef06da7-1-46ff6bfd-875c-40d3-b9d9-a7f795d896fa.png" class="img-fluid"></p>
<p>마지막 row의 SkillValueCategories의 값은 아래와 같이 구하였다.</p>
<p><span class="math display">\[14.250 = \frac{\text{259646선수의 Aggression}+\dots+\text{259646선수의 SlidingTackle}}{4}=\frac{24+6+14+13}{4} \]</span></p>
<div id="b6f5f449-2595-41c3-b089-e2722b99d65e" class="cell" data-tags="[]" data-execution_count="106">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">24</span><span class="op">+</span><span class="dv">6</span><span class="op">+</span><span class="dv">14</span><span class="op">+</span><span class="dv">13</span>)<span class="op">/</span><span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="106">
<pre><code>14.25</code></pre>
</div>
</div>
<p><code>-</code> 시각화를 위해 아래의 코드를 참고하라.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD' or Position=='DEFENDER'"</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>),alpha<span class="op">=</span><span class="fl">0.05</span>,size<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>))</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet).draw()</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="스킬-카테고리별-선수의-로그-연봉-분석-25점" class="level2">
<h2 class="anchored" data-anchor-id="스킬-카테고리별-선수의-로그-연봉-분석-25점"><code>(5)</code> 스킬 카테고리별 선수의 로그 연봉 분석 – 25점</h2>
<p>공격수 포지션을 가진 선수들의 특정 능력치가 그들의 Value에 얼마나 영향을 주는지 알아보고자 한다. 선수들의 logValue를 10개의 구간으로 나눈 후, 각 구간별로 [‘FinishingSkills’,…,‘DefensiveSkills’]의 통합능력치 평균을 바 플롯(bar plot)으로 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="09wk-1-mid_files/figure-html/8fe66166-9ffa-4197-9ed0-4352ca6c2257-1-f8e8d318-7f10-4f55-a4eb-dc1ac195a5b2.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>logValue</code>는 <code>pd.qcut</code>을 이용하여 분할하고 이때 <code>q=10</code>으로 설정하라.</p>
<p><code>2</code>. 시각화를 위해 아래의 코드를 사용하라.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD'"</span>)) </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'logValueCut'</span>,y<span class="op">=</span><span class="st">'SkillValueCategories'</span>,fill<span class="op">=</span><span class="st">'logValueCut'</span>),position<span class="op">=</span><span class="st">'dodge'</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> col <span class="op">+</span> facet <span class="op">+</span> theme(axis_text_x<span class="op">=</span>element_blank(), axis_ticks<span class="op">=</span>element_blank())).draw()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="시각화의-해석-30점" class="level1 page-columns page-full">
<h1>3. 시각화의 해석 – 30점</h1>
<section id="심슨의-역설-10점" class="level2">
<h2 class="anchored" data-anchor-id="심슨의-역설-10점"><code>(1)</code> 심슨의 역설 – 10점</h2>
<p>다음은 농구선수 A,B 의 시즌별 자유투 성공률이다.</p>
<div id="ebb96aa4-daa2-428a-a527-0a9d96409d77" class="cell" data-tags="[]" data-execution_count="784">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Player'</span>: [<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>], </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Season'</span>: [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>]<span class="op">*</span><span class="dv">2</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Status'</span>: [<span class="st">'Success'</span>,<span class="st">'Failure'</span>]<span class="op">*</span><span class="dv">4</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Count'</span>: [<span class="dv">7</span>,<span class="dv">3</span>,<span class="va">None</span>,<span class="va">None</span>,<span class="va">None</span>,<span class="va">None</span>,<span class="dv">4</span>,<span class="dv">0</span>]</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="784">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Player</th>
<th data-quarto-table-cell-role="th">Season</th>
<th data-quarto-table-cell-role="th">Status</th>
<th data-quarto-table-cell-role="th">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>A</td>
<td>1</td>
<td>Success</td>
<td>7.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>A</td>
<td>1</td>
<td>Failure</td>
<td>3.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>A</td>
<td>2</td>
<td>Success</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>A</td>
<td>2</td>
<td>Failure</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B</td>
<td>1</td>
<td>Success</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>B</td>
<td>1</td>
<td>Failure</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>B</td>
<td>2</td>
<td>Success</td>
<td>4.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>B</td>
<td>2</td>
<td>Failure</td>
<td>0.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>적절한 값을 채워 시즌 1,2 모두 B선수의 자유투 성공률이 높지만 시즌1-2를 전체 합치면 A선수의 자유투 성공률이 더 높도록 하라. (즉 적절한 값을 채워 심슨의 역설을 설명하기 위한 자료를 구성하라.) 만들어진 자료를 바탕으로 심슨의 역설을 시각화하라. (즉 시즌별 자유투 성공률과 전체 자유투 성공률을 barplot으로 시각화하라)</p>
</section>
<section id="histogram-equalization-5점" class="level2">
<h2 class="anchored" data-anchor-id="histogram-equalization-5점"><code>(2)</code> Histogram Equalization – 5점</h2>
<div id="b0e92d13-8f23-4190-8820-f09ce79fc2ee" class="cell" data-tags="[]" data-execution_count="22">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Unequalized_Hawkes_Bay_NZ.jpg/300px-Unequalized_Hawkes_Bay_NZ.jpg'</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>img_before <span class="op">=</span> np.array(PIL.Image.<span class="bu">open</span>(io.BytesIO(requests.get(url).content)))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>img_after <span class="op">=</span> cv2.equalizeHist(img_before)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>,<span class="dv">0</span>].imshow(img_before,cmap<span class="op">=</span><span class="st">'gray'</span>,vmax<span class="op">=</span><span class="dv">255</span>,vmin<span class="op">=</span><span class="dv">0</span>)<span class="op">;</span> ax[<span class="dv">0</span>,<span class="dv">0</span>].set_title(<span class="st">"(a) before: image"</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>,<span class="dv">1</span>].imshow(img_after,cmap<span class="op">=</span><span class="st">'gray'</span>,vmax<span class="op">=</span><span class="dv">255</span>,vmin<span class="op">=</span><span class="dv">0</span>)<span class="op">;</span> ax[<span class="dv">0</span>,<span class="dv">1</span>].set_title(<span class="st">"(b) after: image"</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>,<span class="dv">0</span>].hist(img_before.reshape(<span class="op">-</span><span class="dv">1</span>), bins<span class="op">=</span><span class="dv">255</span>)<span class="op">;</span> ax[<span class="dv">1</span>,<span class="dv">0</span>].set_title(<span class="st">"(c) before: histogram"</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>,<span class="dv">1</span>].hist(img_after.reshape(<span class="op">-</span><span class="dv">1</span>), bins<span class="op">=</span><span class="dv">255</span>)<span class="op">;</span> ax[<span class="dv">1</span>,<span class="dv">1</span>].set_title(<span class="st">"(d) after: histogram"</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>fig.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="09wk-1-mid_files/figure-html/cell-14-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>위의 그림을 올바르게 해석한 사람을 모두 고르라. (모두 맞출 경우만 정답으로 인정)</p>
<ul>
<li>유진: (a) 이미지의 값들은 (b) 이미지의 값들 보다 분산이 작을 것이다.</li>
<li>레이: (a) 이미지의 값은 대부분 130~150근처에 모여있어서 회색으로 보인다.</li>
<li>원영: 130~150 사이의 값들은 (b) 이미지 보다 (a) 이미지에서 훨씬 많은 빈도로 나타난다.</li>
<li>리즈: (a) 이미지를 (b) 이미지로 바꾸는 기법을 histogram equalization 이라고 하며, 그 원리는 (c)와 같은 히스토그램을 (d)와 같은 히스토그램으로 바꾸는 것이다.</li>
</ul>
<blockquote class="blockquote">
<p>답안예시: 유진,레이</p>
</blockquote>
</section>
<section id="엔스콤의-플랏-5점" class="level2">
<h2 class="anchored" data-anchor-id="엔스콤의-플랏-5점"><code>(3)</code> 엔스콤의 플랏 – 5점</h2>
<div id="a1602661-1b18-4c3d-80d2-c2052b98eb7e" class="cell" data-tags="[]" data-execution_count="24">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">14</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">12</span>, <span class="dv">7</span>, <span class="dv">5</span>]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> [<span class="fl">8.04</span>, <span class="fl">6.95</span>, <span class="fl">7.58</span>, <span class="fl">8.81</span>, <span class="fl">8.33</span>, <span class="fl">9.96</span>, <span class="fl">7.24</span>, <span class="fl">4.26</span>, <span class="fl">10.84</span>, <span class="fl">4.82</span>, <span class="fl">5.68</span>]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> [<span class="fl">9.14</span>, <span class="fl">8.14</span>, <span class="fl">8.74</span>, <span class="fl">8.77</span>, <span class="fl">9.26</span>, <span class="fl">8.10</span>, <span class="fl">6.13</span>, <span class="fl">3.10</span>, <span class="fl">9.13</span>, <span class="fl">7.26</span>, <span class="fl">4.74</span>]</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>y3 <span class="op">=</span> [<span class="fl">7.46</span>, <span class="fl">6.77</span>, <span class="fl">12.74</span>, <span class="fl">7.11</span>, <span class="fl">7.81</span>, <span class="fl">8.84</span>, <span class="fl">6.08</span>, <span class="fl">5.39</span>, <span class="fl">8.15</span>, <span class="fl">6.42</span>, <span class="fl">5.73</span>]</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>x4 <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">19</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>]</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>y4 <span class="op">=</span> [<span class="fl">6.58</span>, <span class="fl">5.76</span>, <span class="fl">7.71</span>, <span class="fl">8.84</span>, <span class="fl">8.47</span>, <span class="fl">7.04</span>, <span class="fl">5.25</span>, <span class="fl">12.50</span>, <span class="fl">5.56</span>, <span class="fl">7.91</span>, <span class="fl">6.89</span>]</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>fig, ((ax1,ax2),(ax3,ax4)) <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>ax1.plot(x,y1,<span class="st">'.'</span>) </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"(a)"</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>ax2.plot(x,y2,<span class="st">'.'</span>) </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"(b)"</span>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>ax3.plot(x,y3,<span class="st">'.'</span>)<span class="op">;</span> ax3.plot(x[<span class="dv">2</span>],y3[<span class="dv">2</span>],<span class="st">'o'</span>,color<span class="op">=</span><span class="st">'C1'</span>) </span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">"(c)"</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>ax4.plot(x4,y4,<span class="st">'.'</span>)<span class="op">;</span> ax4.plot(x4[<span class="op">-</span><span class="dv">4</span>],y4[<span class="op">-</span><span class="dv">4</span>],<span class="st">'o'</span>,color<span class="op">=</span><span class="st">'C1'</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">"(d)"</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">"Anscombe's quartet"</span>,size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="09wk-1-mid_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>위의 그림을 올바르게 해석한 사람을 모두 고르라. (모두 맞출경우만 정답으로 인정)</p>
<ul>
<li>유진: (a)-(d) 모두 양의 상관계수를 가진다.</li>
<li>레이: 이 중 상관계수값의 해석이 가장 적절한 자료는 (a)이다.</li>
<li>원영: (b)가 적절하지 않은 이유는 선형성이 가정되어 있지 않기 때문이며, (c)가 적절하지 않은 이유는 주황색점으로 표시된 점이 계수값을 크게 바꾸기 때문이다.</li>
<li>리즈: (d)의 경우 주황색점의 값 <span class="math inline">\((x,y)\)</span>을 <span class="math inline">\((-x,y)\)</span>로 바꾸게 된다면 상관계수의 부호가 음수가 될 것이다.</li>
</ul>
</section>
<section id="아이스크림을-많이-먹으면-걸리는-병-5점" class="level2">
<h2 class="anchored" data-anchor-id="아이스크림을-많이-먹으면-걸리는-병-5점"><code>(4)</code> 아이스크림을 많이 먹으면 걸리는 병 – 5점</h2>
<div id="19032366-cfb4-44fe-a0ee-33e09b749856" class="cell" data-tags="[]" data-execution_count="26">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span>pd.read_csv(<span class="st">'https://raw.githubusercontent.com/guebin/DV2022/master/posts/icecream.csv'</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>ggplot(data<span class="op">=</span>df.assign(temp<span class="op">=</span>pd.cut(df.temp,[<span class="op">-</span>np.inf,<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>,np.inf])))<span class="op">\</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="op">+</span>geom_point(aes(x<span class="op">=</span><span class="st">'icecream'</span>,y<span class="op">=</span><span class="st">'disease'</span>,color<span class="op">=</span><span class="st">'temp'</span>))<span class="op">\</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="op">+</span>geom_smooth(aes(x<span class="op">=</span><span class="st">'icecream'</span>,y<span class="op">=</span><span class="st">'disease'</span>,color<span class="op">=</span><span class="st">'temp'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="09wk-1-mid_files/figure-html/cell-16-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>&lt;Figure Size: (640 x 480)&gt;</code></pre>
</div>
</div>
<p>아래의 그림을 보고 올바르게 해석한 사람을 모두 고르라. (모두 맞출경우만 정답으로 인정)</p>
<blockquote class="blockquote">
<p>그림에 대한 배경설명은 강의노트 “아이스크림을 많이 먹으면 걸리는 병”을 참고</p>
</blockquote>
<ul>
<li>원영: (아이스크림 판매량, 소아마비 반응수치)의 상관계수값은 양수이다.</li>
<li>가을: 온도를 통제하였을 경우 (아이스크림 판매량, 소아마비 반응수치)의 상관계수값은, 온도를 통제하지 않았을 경우 (아이스크림 판매량, 소아마비 반응수치)의 상관계수 값보다 작다.</li>
<li>이서: (온도, 소아마비 반응수치)의 상관계수 값은 양수이다.</li>
<li>레이: (온도, 아이스크림 판매량)의 상관계수 값은 양수이다.</li>
<li>유진: 온도가 유일한 은닉변수라면, 아이스크림 판매량과 소아마비 반응수치 사이에는 인과성이 없다고 볼 수 있다.</li>
</ul>
</section>
<section id="산점도의-해석들-5점" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="산점도의-해석들-5점"><code>(5)</code> 산점도의 해석들 – 5점</h2>
<p>아래는 <code>문제 4</code>에 제시된 산점도와 그 해석들이다. 옳은 해석을 모두 골라라.</p>
<blockquote class="blockquote">
<p>답안예시: 해석1,해석2,해석3</p>
</blockquote>
<p><strong>4-(1)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="09wk-1-mid_files/figure-html/4853654b-9ddb-4965-bf42-c03b55a51155-1-e6dae371-9291-4628-8ae6-cd09d7b26d5a.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption margin-caption">4-(1)의 그림</figcaption>
</figure>
</div>
<p><code>해석1</code>: 모든 포지션에 대하여, (Age,logValue)는 음의 상관계수값을 가지며 (Age,logWage)는 양의 상관계수값을 가진다.</p>
<p><strong>4-(2)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="09wk-1-mid_files/figure-html/29c4dc31-9970-43ff-bace-ee20ba8627cf-1-47d67bcc-5b2a-4448-87ff-7be1be2869d0.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption margin-caption">4-(2)의 그림</figcaption>
</figure>
</div>
<p><code>해석2</code>: [GKDiving,…,GKReflexes]는 모두 logWage와 양의 상관계수값을 가진다.</p>
<p><strong>4-(3)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="09wk-1-mid_files/figure-html/704cc867-21d4-4992-b18b-d3dee98300c0-1-0781c708-d427-405c-afde-64ee6f729a44.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption margin-caption">4-(3)의 그림</figcaption>
</figure>
</div>
<p><code>해석3</code>: GOALKEEPER 포지션의 경우 GKAbility를 이용하여 Overall을 추정하는 것이 합리적이지만 FORWARD 포지션의 경우 GKAbility를 이용하여 Overall을 추정하는 것은 합리적이지 않다.</p>
<p><strong>4-(4)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="09wk-1-mid_files/figure-html/3a7394db-c77e-434f-b1d0-4270c09b9cf9-1-d48e8b31-62d1-42d3-9bf5-ba93a2bb4df3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption margin-caption">4-(4)의 그림</figcaption>
</figure>
</div>
<p><code>해석4</code>: 수비수 포지션의 경우 FinishingSkills 과 logValue 사이의 상관계수 값은 거의 0에 가깝다.</p>


</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        console.log("RESIZE");
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="guebin/DV2023" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>