<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.520">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="최규빈">
<meta name="dcterms.date" content="2023-11-10">

<title>DV2023 - supp-4: 중간고사 풀이</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">DV2023</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/guebin/DV2023"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/channel/UCQk9RyBNgXc7ORIsYlOfQrg/playlists?view=50&amp;sort=dd&amp;shelf_id=2"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#에너지사용량-80점" id="toc-에너지사용량-80점" class="nav-link active" data-scroll-target="#에너지사용량-80점">1. 에너지사용량 – 80점</a>
  <ul class="collapse">
  <li><a href="#에너지-사용-추세-10점" id="toc-에너지-사용-추세-10점" class="nav-link" data-scroll-target="#에너지-사용-추세-10점"><code>(1)</code> 에너지 사용 추세 – 10점</a></li>
  <li><a href="#에너지-종류별-사용-추세-10점" id="toc-에너지-종류별-사용-추세-10점" class="nav-link" data-scroll-target="#에너지-종류별-사용-추세-10점"><code>(2)</code> 에너지 종류별 사용 추세 – 10점</a></li>
  <li><a href="#년-대비-2021년의-전기에너지-사용량-증가-20점" id="toc-년-대비-2021년의-전기에너지-사용량-증가-20점" class="nav-link" data-scroll-target="#년-대비-2021년의-전기에너지-사용량-증가-20점"><code>(3)</code> 2020년 대비 2021년의 전기에너지 사용량 증가 – 20점</a></li>
  <li><a href="#건물당-에너지-소비량-연도별-상위-15구-비교-20점" id="toc-건물당-에너지-소비량-연도별-상위-15구-비교-20점" class="nav-link" data-scroll-target="#건물당-에너지-소비량-연도별-상위-15구-비교-20점"><code>(4)</code> 건물당 에너지 소비량: 연도별 상위 15구 비교 – 20점</a></li>
  <li><a href="#수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점" id="toc-수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점" class="nav-link" data-scroll-target="#수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점"><code>(5)</code> 수도권과 비수도권의 전기 에너지 사용량 및 사용 비율 – 20점</a></li>
  </ul></li>
  <li><a href="#fifa-90점" id="toc-fifa-90점" class="nav-link" data-scroll-target="#fifa-90점">2. FIFA – 90점</a>
  <ul class="collapse">
  <li><a href="#나이와-포지션에-따른-선수-가치-및-급여-분석-10점" id="toc-나이와-포지션에-따른-선수-가치-및-급여-분석-10점" class="nav-link" data-scroll-target="#나이와-포지션에-따른-선수-가치-및-급여-분석-10점"><code>(1)</code> 나이와 포지션에 따른 선수 가치 및 급여 분석 – 10점</a></li>
  <li><a href="#골키퍼-능력치별-로그급여-추세-10점" id="toc-골키퍼-능력치별-로그급여-추세-10점" class="nav-link" data-scroll-target="#골키퍼-능력치별-로그급여-추세-10점"><code>(2)</code> 골키퍼 능력치별 로그급여 추세 – 10점</a></li>
  <li><a href="#gkability에-따른-골키퍼의-overall-예측-20점" id="toc-gkability에-따른-골키퍼의-overall-예측-20점" class="nav-link" data-scroll-target="#gkability에-따른-골키퍼의-overall-예측-20점"><code>(3)</code> “GKAbility”에 따른 골키퍼의 Overall 예측 – 20점</a></li>
  <li><a href="#포워드와-수비수의-기술별-가치-평가-25점" id="toc-포워드와-수비수의-기술별-가치-평가-25점" class="nav-link" data-scroll-target="#포워드와-수비수의-기술별-가치-평가-25점"><code>(4)</code> 포워드와 수비수의 기술별 가치 평가 – 25점</a></li>
  <li><a href="#스킬-카테고리별-선수의-로그-연봉-분석-25점" id="toc-스킬-카테고리별-선수의-로그-연봉-분석-25점" class="nav-link" data-scroll-target="#스킬-카테고리별-선수의-로그-연봉-분석-25점"><code>(5)</code> 스킬 카테고리별 선수의 로그 연봉 분석 – 25점</a></li>
  </ul></li>
  <li><a href="#시각화의-해석-30점" id="toc-시각화의-해석-30점" class="nav-link" data-scroll-target="#시각화의-해석-30점">3. 시각화의 해석 – 30점</a>
  <ul class="collapse">
  <li><a href="#심슨의-역설-10점" id="toc-심슨의-역설-10점" class="nav-link" data-scroll-target="#심슨의-역설-10점"><code>(1)</code> 심슨의 역설 – 10점</a></li>
  <li><a href="#histogram-equalization-5점" id="toc-histogram-equalization-5점" class="nav-link" data-scroll-target="#histogram-equalization-5점"><code>(2)</code> Histogram Equalization – 5점</a></li>
  <li><a href="#엔스콤의-플랏-5점" id="toc-엔스콤의-플랏-5점" class="nav-link" data-scroll-target="#엔스콤의-플랏-5점"><code>(3)</code> 엔스콤의 플랏 – 5점</a></li>
  <li><a href="#아이스크림을-많이-먹으면-걸리는-병-5점" id="toc-아이스크림을-많이-먹으면-걸리는-병-5점" class="nav-link" data-scroll-target="#아이스크림을-많이-먹으면-걸리는-병-5점"><code>(4)</code> 아이스크림을 많이 먹으면 걸리는 병 – 5점</a></li>
  <li><a href="#산점도의-해석들-5점" id="toc-산점도의-해석들-5점" class="nav-link" data-scroll-target="#산점도의-해석들-5점"><code>(5)</code> 산점도의 해석들 – 5점</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="10wk-supp-mid-sol.out.ipynb" download="10wk-supp-mid-sol.out.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">supp-4: 중간고사 풀이</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>최규빈 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 10, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><a href="https://colab.research.google.com/github/guebin/DV2023/blob/main/posts/09wk-1-mid.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" style="text-align: left"></a></p>
<div id="b08513a7-b0a8-4203-bef4-98eb5bdf7276" class="cell" data-tags="[]" data-execution_count="161">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> PIL</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> io </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cv2 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="에너지사용량-80점" class="level1 page-columns page-full">
<h1>1. 에너지사용량 – 80점</h1>
<p>아래는 2019년 서울의 에너지사용량을 불러오는 예시코드이다.</p>
<div id="645489f9-745a-4a5f-bbe0-f387baef3374" class="cell" data-tags="[]" data-execution_count="7">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pd.read_csv(<span class="st">'https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2019.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">지역</th>
<th data-quarto-table-cell-role="th">건물동수</th>
<th data-quarto-table-cell-role="th">연면적</th>
<th data-quarto-table-cell-role="th">에너지사용량(TOE)/전기</th>
<th data-quarto-table-cell-role="th">에너지사용량(TOE)/도시가스</th>
<th data-quarto-table-cell-role="th">에너지사용량(TOE)/지역난방</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>종로구</td>
<td>17,851</td>
<td>9,204,140</td>
<td>63,492</td>
<td>76,653</td>
<td>799</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>중구</td>
<td>10,383</td>
<td>10,078,848</td>
<td>79,223</td>
<td>68,210</td>
<td>497</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>용산구</td>
<td>17,138</td>
<td>10,756,612</td>
<td>51,229</td>
<td>79,805</td>
<td>11,128</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>성동구</td>
<td>13,980</td>
<td>11,804,313</td>
<td>59,832</td>
<td>99,986</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>광진구</td>
<td>21,556</td>
<td>12,272,738</td>
<td>68,756</td>
<td>123,447</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>동대문구</td>
<td>21,794</td>
<td>12,664,554</td>
<td>65,913</td>
<td>111,420</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>중랑구</td>
<td>23,950</td>
<td>15,182,802</td>
<td>59,370</td>
<td>109,284</td>
<td>7,442</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>성북구</td>
<td>27,112</td>
<td>15,938,807</td>
<td>77,007</td>
<td>148,376</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>강북구</td>
<td>23,334</td>
<td>9,458,987</td>
<td>47,731</td>
<td>100,045</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>도봉구</td>
<td>13,168</td>
<td>10,644,704</td>
<td>44,985</td>
<td>90,379</td>
<td>5,268</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>노원구</td>
<td>9,704</td>
<td>17,197,086</td>
<td>77,010</td>
<td>94,340</td>
<td>50,859</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>은평구</td>
<td>25,200</td>
<td>14,735,131</td>
<td>75,914</td>
<td>130,159</td>
<td>14,370</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>서대문구</td>
<td>17,651</td>
<td>12,559,425</td>
<td>65,164</td>
<td>111,542</td>
<td>6,330</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>마포구</td>
<td>18,844</td>
<td>15,024,186</td>
<td>92,453</td>
<td>114,931</td>
<td>20,148</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>양천구</td>
<td>14,690</td>
<td>15,428,339</td>
<td>70,721</td>
<td>82,857</td>
<td>49,258</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>강서구</td>
<td>20,446</td>
<td>20,641,866</td>
<td>86,809</td>
<td>128,786</td>
<td>35,896</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>구로구</td>
<td>17,204</td>
<td>13,509,894</td>
<td>59,916</td>
<td>120,457</td>
<td>2,963</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>금천구</td>
<td>12,135</td>
<td>7,420,441</td>
<td>34,791</td>
<td>69,814</td>
<td>732</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>영등포구</td>
<td>18,133</td>
<td>14,914,027</td>
<td>87,480</td>
<td>114,238</td>
<td>13,531</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>동작구</td>
<td>20,102</td>
<td>13,612,946</td>
<td>66,811</td>
<td>132,285</td>
<td>899</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>관악구</td>
<td>26,460</td>
<td>14,997,859</td>
<td>85,416</td>
<td>158,543</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>서초구</td>
<td>12,856</td>
<td>21,560,285</td>
<td>135,491</td>
<td>121,437</td>
<td>38,866</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>강남구</td>
<td>16,129</td>
<td>29,961,585</td>
<td>180,121</td>
<td>149,045</td>
<td>83,459</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>송파구</td>
<td>19,331</td>
<td>26,573,343</td>
<td>139,117</td>
<td>143,601</td>
<td>71,954</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>강동구</td>
<td>16,636</td>
<td>15,048,315</td>
<td>70,341</td>
<td>121,931</td>
<td>11,921</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>에너지 사용량은 2018년부터 2021년까지의 기간 동안 서울, 부산 등 여러 지역에 대해 정리되어 있으며, 아래 주소 형식으로 저장되어 있다.</p>
<pre><code>https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2018.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2019.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2020.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Seoul2021.csv
...
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2018.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2019.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2020.csv
https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/Busan2021.csv</code></pre>
<p>아래의 <code>url</code>, <code>prov</code>를 참고하여 모든 자료를 불러온 뒤 <code>pd.concat()</code>을 이용하여 하나의 df로 합쳐라.</p>
<div id="bd4e758c-b243-416f-82ad-a91cd93284ab" class="cell" data-tags="[]" data-execution_count="173">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/guebin/DV2022/main/posts/Energy/</span><span class="sc">{}</span><span class="st">.csv'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>prov <span class="op">=</span> [<span class="st">'Seoul'</span>, <span class="st">'Busan'</span>, <span class="st">'Daegu'</span>, <span class="st">'Incheon'</span>, </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Gwangju'</span>, <span class="st">'Daejeon'</span>, <span class="st">'Ulsan'</span>, <span class="st">'Sejongsi'</span>, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Gyeonggi-do'</span>, <span class="st">'Gangwon-do'</span>, <span class="st">'Chungcheongbuk-do'</span>, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Chungcheongnam-do'</span>, <span class="st">'Jeollabuk-do'</span>, <span class="st">'Jeollanam-do'</span>, </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Gyeongsangbuk-do'</span>, <span class="st">'Gyeongsangnam-do'</span>, <span class="st">'Jeju-do'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>의미상 숫자형이지만 문자형으로 입력이된 자료를 모두 전처리하고, 아래의 딕셔너리를 이용하여 열의 이름을 변환하라.</p>
<div id="7ae97edf-8b68-4408-a2fd-15da95b6369a" class="cell" data-tags="[]" data-execution_count="174">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>name_dict <span class="op">=</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'년도'</span>: <span class="st">'Year'</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'시도'</span>: <span class="st">'Prov'</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'지역'</span>: <span class="st">'Reg'</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'건물동수'</span>: <span class="st">'BldgCount'</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'연면적'</span>: <span class="st">'Area'</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'에너지사용량(TOE)/전기'</span>: <span class="st">'Elec'</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'에너지사용량(TOE)/도시가스'</span>: <span class="st">'Gas'</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'에너지사용량(TOE)/지역난방'</span>: <span class="st">'Heat'</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>올바르게 정리된 데이터프레임의 예시는 아래와 같다.</p>
<hr>
<p><img src="10wk-supp-mid-sol_files/figure-html/004b1561-710c-4fb0-9aa9-fc4f066dd533-1-fb277eb0-4784-41ef-b810-0bba510e98d9.png" class="img-fluid"></p>
<p><code>(풀이)</code></p>
<div id="72e7cf4c-1f5a-4f29-b290-f08b9cf35f69" class="cell" data-tags="[]" data-execution_count="293">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([pd.read_csv(url.<span class="bu">format</span>(p<span class="op">+</span>y)).assign(년도<span class="op">=</span>y, 시도<span class="op">=</span>p) <span class="cf">for</span> p <span class="kw">in</span> prov <span class="cf">for</span> y <span class="kw">in</span> [<span class="st">'2018'</span>, <span class="st">'2019'</span>, <span class="st">'2020'</span>, <span class="st">'2021'</span>]]).reset_index(drop<span class="op">=</span><span class="va">True</span>)<span class="op">\</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>.assign(년도 <span class="op">=</span> <span class="kw">lambda</span> df: df.년도.astype(<span class="bu">int</span>))<span class="op">\</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>.set_index([<span class="st">'년도'</span>,<span class="st">'시도'</span>,<span class="st">'지역'</span>]).applymap(<span class="kw">lambda</span> x: <span class="bu">int</span>(<span class="bu">str</span>(x).replace(<span class="st">','</span>,<span class="st">''</span>)))<span class="op">\</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>.reset_index().rename(name_dict,axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_2202595/3641002374.py:3: FutureWarning: DataFrame.applymap has been deprecated. Use DataFrame.map instead.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="293">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Prov</th>
<th data-quarto-table-cell-role="th">Reg</th>
<th data-quarto-table-cell-role="th">BldgCount</th>
<th data-quarto-table-cell-role="th">Area</th>
<th data-quarto-table-cell-role="th">Elec</th>
<th data-quarto-table-cell-role="th">Gas</th>
<th data-quarto-table-cell-role="th">Heat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2018</td>
<td>Seoul</td>
<td>종로구</td>
<td>17929</td>
<td>9141777</td>
<td>64818</td>
<td>82015</td>
<td>111</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2018</td>
<td>Seoul</td>
<td>중구</td>
<td>10598</td>
<td>10056233</td>
<td>81672</td>
<td>75260</td>
<td>563</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2018</td>
<td>Seoul</td>
<td>용산구</td>
<td>17201</td>
<td>10639652</td>
<td>52659</td>
<td>85220</td>
<td>12043</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2018</td>
<td>Seoul</td>
<td>성동구</td>
<td>14180</td>
<td>11631770</td>
<td>60559</td>
<td>107416</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2018</td>
<td>Seoul</td>
<td>광진구</td>
<td>21520</td>
<td>12054796</td>
<td>70609</td>
<td>130308</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">995</td>
<td>2019</td>
<td>Jeju-do</td>
<td>서귀포시</td>
<td>34729</td>
<td>7233931</td>
<td>34641</td>
<td>1306</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">996</td>
<td>2020</td>
<td>Jeju-do</td>
<td>제주시</td>
<td>66504</td>
<td>19819923</td>
<td>99212</td>
<td>22179</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">997</td>
<td>2020</td>
<td>Jeju-do</td>
<td>서귀포시</td>
<td>34880</td>
<td>7330040</td>
<td>35510</td>
<td>1639</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">998</td>
<td>2021</td>
<td>Jeju-do</td>
<td>제주시</td>
<td>67053</td>
<td>20275738</td>
<td>103217</td>
<td>25689</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">999</td>
<td>2021</td>
<td>Jeju-do</td>
<td>서귀포시</td>
<td>35230</td>
<td>7512206</td>
<td>37884</td>
<td>2641</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>1000 rows × 8 columns</p>
</div>
</div>
</div>
<section id="에너지-사용-추세-10점" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="에너지-사용-추세-10점"><code>(1)</code> 에너지 사용 추세 – 10점</h2>
<p>2018년부터 2021년까지 에너지사용량을 dot-connected plot으로 시각화 하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/2b70d6a1-3d92-4ef5-88e0-c40f944590ad-1-14954b76-40f1-49d0-960c-ee9b5e5bc194.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. plotnine으로 생성된 <code>fig</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>에 <code>.draw()</code>메소드를 사용하여 <code>matplotlib.figure.Figure</code> 자료형으로 변환할것</p>
<div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;type이 <code>plotnine.ggplot.ggplot</code> 인 오브젝트</p></li></div><p><code>2</code>. 변환된 자료형에 <code>fig.suptitle()</code> method를 사용하여 제목을 설정할것.</p>
<hr>
<p><code>(풀이)</code></p>
<div id="b30d6cf1-3701-4eca-aa2d-edf4574b8f95" class="cell" data-tags="[]" data-execution_count="294">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.loc[:,[<span class="st">'Year'</span>,<span class="st">'Elec'</span>,<span class="st">'Gas'</span>,<span class="st">'Heat'</span>]]<span class="op">\</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>.<span class="bu">eval</span>(<span class="st">'EnergyUse = Elec + Gas + Heat'</span>)<span class="op">\</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>.pivot_table(index<span class="op">=</span> <span class="st">'Year'</span>, values <span class="op">=</span> <span class="st">'EnergyUse'</span>, aggfunc<span class="op">=</span><span class="st">'sum'</span>).reset_index()</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'Year'</span>,y<span class="op">=</span><span class="st">'EnergyUse'</span>))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> geom_line(aes(x<span class="op">=</span><span class="st">'Year'</span>,y<span class="op">=</span><span class="st">'EnergyUse'</span>))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> line <span class="op">+</span> point).draw()</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">"Energy Usage Trend from 2018 to 2021"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="294">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="에너지-종류별-사용-추세-10점" class="level2">
<h2 class="anchored" data-anchor-id="에너지-종류별-사용-추세-10점"><code>(2)</code> 에너지 종류별 사용 추세 – 10점</h2>
<p>2018년부터 2021년까지 에너지사용량을 dot-connected plot으로 시각화 하라. 에너지의 유형은 색상으로 구분하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/f11798f6-1c02-4b00-8b6d-c89cb7d43688-1-299d0f6a-136e-450e-8e1c-86518f79a688.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code> <code>geom_point</code>의 color와 shape을 <code>EneryType</code>으로 설정할 것.</p>
<p><code>2</code> <code>geom_line</code>의 color와 linetype을 <code>EneryType</code>으로 설정할 것</p>
<hr>
<p><code>(풀이)</code></p>
<div id="4502306b-47f8-4e6f-b068-68a6eadf29c1" class="cell" data-tags="[]" data-execution_count="295">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.loc[:,[<span class="st">'Year'</span>,<span class="st">'Elec'</span>,<span class="st">'Gas'</span>,<span class="st">'Heat'</span>]]<span class="op">\</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>.melt(id_vars<span class="op">=</span><span class="st">'Year'</span>).rename({<span class="st">'variable'</span>:<span class="st">'EnergyType'</span>,<span class="st">'value'</span>:<span class="st">'EnergyUse'</span>},axis<span class="op">=</span><span class="dv">1</span>)<span class="op">\</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>.groupby([<span class="st">'Year'</span>,<span class="st">'EnergyType'</span>]).agg({<span class="st">'EnergyUse'</span>:<span class="st">'sum'</span>}).reset_index()</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'Year'</span>,y<span class="op">=</span><span class="st">'EnergyUse'</span>,color<span class="op">=</span><span class="st">'EnergyType'</span>,shape<span class="op">=</span><span class="st">'EnergyType'</span>))</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> geom_line(aes(x<span class="op">=</span><span class="st">'Year'</span>,y<span class="op">=</span><span class="st">'EnergyUse'</span>,color<span class="op">=</span><span class="st">'EnergyType'</span>,linetype<span class="op">=</span><span class="st">'EnergyType'</span>))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> line <span class="op">+</span> point</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="년-대비-2021년의-전기에너지-사용량-증가-20점" class="level2">
<h2 class="anchored" data-anchor-id="년-대비-2021년의-전기에너지-사용량-증가-20점"><code>(3)</code> 2020년 대비 2021년의 전기에너지 사용량 증가 – 20점</h2>
<p>2020년 대비 2021년의 전기에너지 사용량이 증가한 상위 5개의 지역을 아래와 같이 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/0c574030-a78b-4114-a237-333a65d05cd0-1-9bceaea8-1b44-48dd-8791-f544a0e05443.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. 2020년 대비 2021년의 전기에너지 사용 증가량은 아래와 같이 구한다.</p>
<p><span class="math display">\[\text{서울의 전기에너지 사용 증가량} = \frac{\text{2021년 서울 전기에너지 사용량}-\text{2020년 서울 전기에너지 사용량}}{\text{2020년 서울 전기에너지 사용량}}\]</span></p>
<ul>
<li><span class="math inline">\(\text{서울의 2021년 전기에너지 사용 증가량}= \text{2021년 강남구의 전기에너지 사용량} + \dots + \text{2021년 중랑구의 전기에너지 사용량}\)</span></li>
<li><span class="math inline">\(\text{서울의 2020년 전기에너지 사용 증가량}= \text{2020년 강남구의 전기에너지 사용량} + \dots + \text{2020년 중랑구의 전기에너지 사용량}\)</span></li>
</ul>
<p><code>2</code>. 전기에너지의 사용량이 증가한 상위5개의 지역 중 가장 많이 증가한 2개의 지역은 색깔과 투명도로 하이라이팅 한다. (구체적 코드는 hint를 참고할 것)</p>
<p><strong>힌트</strong></p>
<p><code>-</code> 정리된 자료의 형태는 아래와 같아야 한다.</p>
<p><img src="10wk-supp-mid-sol_files/figure-html/8c5895ac-dbe0-4f3a-904e-80ecb28d20f3-1-f0e6e145-0fa8-4edf-b60b-d16e034ebf4d.png" class="img-fluid"></p>
<p><code>-</code> 그림안에 text를 넣기위해서 <code>geom_text</code>를 시용한다. 위의 데이터가 정리되었다는 전제하에 구체적인 시각화 코드는 아래와 같다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">'Rank&lt;5'</span>))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'Rank'</span>,y<span class="op">=</span><span class="st">'ElecUseInc'</span>,fill<span class="op">=</span><span class="st">'Top2'</span>,alpha<span class="op">=</span><span class="st">'Top2'</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> geom_text(aes(x<span class="op">=</span><span class="st">'Rank'</span>,y<span class="op">=</span><span class="st">'ElecUseInc'</span>,label<span class="op">=</span><span class="st">'Prov'</span>))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> col <span class="op">+</span> text <span class="op">+</span> scale_alpha_manual(values<span class="op">=</span>{<span class="va">True</span>: <span class="dv">1</span>, <span class="va">False</span>: <span class="fl">0.2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p><code>(풀이)</code></p>
<div id="05ea81ef-d707-46fa-91ce-2f5f957c6a52" class="cell" data-tags="[]" data-execution_count="296">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df.pivot_table(index<span class="op">=</span><span class="st">'Prov'</span>,columns<span class="op">=</span><span class="st">'Year'</span>,values<span class="op">=</span><span class="st">'Elec'</span>,aggfunc<span class="op">=</span><span class="st">'sum'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="296">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Prov</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Busan</td>
<td>613522</td>
<td>602980</td>
<td>601071</td>
<td>1043425</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Chungcheongbuk-do</td>
<td>361490</td>
<td>351235</td>
<td>347927</td>
<td>352396</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Chungcheongnam-do</td>
<td>456260</td>
<td>444046</td>
<td>440752</td>
<td>454891</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Daegu</td>
<td>457556</td>
<td>445745</td>
<td>447380</td>
<td>451326</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Daejeon</td>
<td>309660</td>
<td>302359</td>
<td>300984</td>
<td>308426</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Gangwon-do</td>
<td>386183</td>
<td>370390</td>
<td>365168</td>
<td>369819</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Gwangju</td>
<td>288191</td>
<td>285831</td>
<td>287894</td>
<td>292585</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Gyeonggi-do</td>
<td>2264803</td>
<td>2236781</td>
<td>2250687</td>
<td>2332201</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Gyeongsangbuk-do</td>
<td>521896</td>
<td>505723</td>
<td>504694</td>
<td>513491</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Gyeongsangnam-do</td>
<td>622126</td>
<td>609041</td>
<td>608268</td>
<td>611001</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Incheon</td>
<td>500591</td>
<td>492754</td>
<td>489258</td>
<td>505623</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Jeju-do</td>
<td>129862</td>
<td>130855</td>
<td>134722</td>
<td>141101</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Jeollabuk-do</td>
<td>356715</td>
<td>350862</td>
<td>351573</td>
<td>357058</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Jeollanam-do</td>
<td>338234</td>
<td>330685</td>
<td>334805</td>
<td>338032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Sejongsi</td>
<td>60932</td>
<td>64564</td>
<td>67545</td>
<td>70915</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Seoul</td>
<td>1990158</td>
<td>1945093</td>
<td>1910076</td>
<td>3486022</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ulsan</td>
<td>197002</td>
<td>192580</td>
<td>193846</td>
<td>196412</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="28237863-fdb9-48c7-ae09-a463b1fc3dab" class="cell" data-tags="[]" data-execution_count="297">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.pivot_table(index<span class="op">=</span><span class="st">'Prov'</span>,columns<span class="op">=</span><span class="st">'Year'</span>,values<span class="op">=</span><span class="st">'Elec'</span>,aggfunc<span class="op">=</span><span class="st">'sum'</span>)<span class="op">\</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>.assign(ElecUseInc <span class="op">=</span> <span class="kw">lambda</span> df: (df[<span class="dv">2021</span>]<span class="op">-</span>df[<span class="dv">2020</span>])<span class="op">/</span>df[<span class="dv">2020</span>]).loc[:,<span class="st">'ElecUseInc'</span>].reset_index()<span class="op">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>.sort_values(<span class="st">'ElecUseInc'</span>,ascending<span class="op">=</span><span class="va">False</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)<span class="op">\</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>.<span class="bu">eval</span>(<span class="st">'Rank=index'</span>).<span class="bu">eval</span>(<span class="st">'Top2= Rank&lt;2'</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">'Rank&lt;5'</span>))</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'Rank'</span>,y<span class="op">=</span><span class="st">'ElecUseInc'</span>,fill<span class="op">=</span><span class="st">'Top2'</span>,alpha<span class="op">=</span><span class="st">'Top2'</span>))</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> geom_text(aes(x<span class="op">=</span><span class="st">'Rank'</span>,y<span class="op">=</span><span class="st">'ElecUseInc'</span>,label<span class="op">=</span><span class="st">'Prov'</span>))</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> col <span class="op">+</span> text <span class="op">+</span> scale_alpha_manual(values<span class="op">=</span>{<span class="va">True</span>: <span class="dv">1</span>, <span class="va">False</span>: <span class="fl">0.2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="건물당-에너지-소비량-연도별-상위-15구-비교-20점" class="level2">
<h2 class="anchored" data-anchor-id="건물당-에너지-소비량-연도별-상위-15구-비교-20점"><code>(4)</code> 건물당 에너지 소비량: 연도별 상위 15구 비교 – 20점</h2>
<p>건물당 에너지소비량이 가장 큰 15개의 구를 연도별로 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/36b28dc5-19cc-4afa-9d72-0d0500a1df2e-1-f810b499-1c3d-4072-8fae-e81222ea1836.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. 건물당 에너지 사용량(=EUB)을 아래와 같은 방식으로 구할 것</p>
<p><span class="math display">\[\text{EUB}_{강남구,2018}=\frac{\text{강남구의 2018년도 전기에너지 사용량}+ \text{강남구의 2018년도 도시가스 사용량} +\text{강남구의 2018년도 지역난방 사용량}}{\text{강남구의 2018년도 건물동수}}\]</span></p>
<p><code>2</code>. 연도별로 EUB가 높은 15개의 구를 정렬할 것. (따라서 매년도마다 순위가 다를수 있음)</p>
<hr>
<p><code>(풀이)</code></p>
<div id="050539f7-9e00-4a75-bc8a-e3ca31699037" class="cell" data-tags="[]" data-execution_count="298">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> df.<span class="bu">eval</span>(<span class="st">'EUB = (Elec + Gas + Heat)/BldgCount'</span>).loc[:,[<span class="st">'Year'</span>,<span class="st">'Prov'</span>,<span class="st">'Reg'</span>,<span class="st">'EUB'</span>]].groupby([<span class="st">'Year'</span>])</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> pd.concat([df.sort_values(<span class="st">'EUB'</span>,ascending<span class="op">=</span><span class="va">False</span>).iloc[:<span class="dv">15</span>].reset_index(drop<span class="op">=</span><span class="va">True</span>).<span class="bu">eval</span>(<span class="st">'Rank=index'</span>) <span class="cf">for</span> k,df <span class="kw">in</span> g]).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'Rank'</span>,y<span class="op">=</span><span class="st">'EUB'</span>,fill<span class="op">=</span><span class="st">'Prov'</span>))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'Year'</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> col <span class="op">+</span> facet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점" class="level2">
<h2 class="anchored" data-anchor-id="수도권과-비수도권의-전기-에너지-사용량-및-사용-비율-20점"><code>(5)</code> 수도권과 비수도권의 전기 에너지 사용량 및 사용 비율 – 20점</h2>
<p>수도권과 비수도권의 전기에너지 사용량 및 사용비율을 계산하고 시각화 하라.</p>
<p><strong>시각화예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/1c2c70ae-ee49-4e6a-ab64-b08b478bf244-1-439a5b7e-814a-424f-a345-14fffcb42f6a.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>['Seoul','Gyeonggi-do','Incheon']</code>은 수도권으로 그 외의 지역은 비수도권으로 분리한다.</p>
<p><code>2</code>. 수도권의 전기에너지 사용비율은 아래와 같이 구한다.</p>
<p><span class="math display">\[\text{2018년 수도권의 전기에너지 사용비율} = \frac{\text{2018년 수도권의 전기 사용량}}{\text{2018년 수도권의 전기 사용량}+\text{2018년 수도권의 도시가스 사용량}+\text{2018년 수도권의 지역난방 사용량}}\]</span></p>
<p><code>3</code>. <code>facet_wrap</code> 사용시 <code>scales='free'</code> 옵션을 사용할 것</p>
<hr>
<p><code>(풀이)</code></p>
<div id="e9af96b8-78ac-4eb6-800f-d52a45773089" class="cell" data-tags="[]" data-execution_count="299">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.assign(Metro <span class="op">=</span> df.Prov.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="kw">in</span> [<span class="st">'Seoul'</span>,<span class="st">'Gyeonggi-do'</span>,<span class="st">'Incheon'</span>]))<span class="op">\</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>.pivot_table(index<span class="op">=</span>[<span class="st">'Metro'</span>,<span class="st">'Year'</span>],values<span class="op">=</span>[<span class="st">'Elec'</span>,<span class="st">'Gas'</span>,<span class="st">'Heat'</span>],aggfunc<span class="op">=</span><span class="st">'sum'</span>)<span class="op">\</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">eval</span>(<span class="st">'ElecRate = Elec/(Elec+Gas+Heat)'</span>).rename({<span class="st">'Elec'</span>:<span class="st">'ElecUse'</span>},axis<span class="op">=</span><span class="dv">1</span>)<span class="op">\</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'ElecUse'</span>,<span class="st">'ElecRate'</span>]].stack().reset_index()<span class="op">\</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>.set_axis([<span class="st">'Metro'</span>,<span class="st">'Year'</span>,<span class="st">'MsrType'</span>,<span class="st">'Amount'</span>],axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># #---#</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> geom_line(aes(x<span class="op">=</span><span class="st">'Year'</span>,y<span class="op">=</span><span class="st">'Amount'</span>,color<span class="op">=</span><span class="st">'Metro'</span>))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'Year'</span>,y<span class="op">=</span><span class="st">'Amount'</span>,color<span class="op">=</span><span class="st">'Metro'</span>))</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'MsrType'</span>,scales<span class="op">=</span><span class="st">'free'</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> line <span class="op">+</span> point <span class="op">+</span> facet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="fifa-90점" class="level1">
<h1>2. FIFA – 90점</h1>
<p>아래는 FIFA22 자료를 불러오는 코드이다.</p>
<div id="641ed4ec-b388-44b2-9d23-96f164dc9605" class="cell" data-tags="[]" data-execution_count="246">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/guebin/DV2021/master/_notebooks/2021-10-25-FIFA22_official_data.csv'</span>).drop([<span class="st">'Loaned From'</span>,<span class="st">'Marking'</span>],axis<span class="op">=</span><span class="dv">1</span>).dropna()</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="246">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ID</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Age</th>
<th data-quarto-table-cell-role="th">Photo</th>
<th data-quarto-table-cell-role="th">Nationality</th>
<th data-quarto-table-cell-role="th">Flag</th>
<th data-quarto-table-cell-role="th">Overall</th>
<th data-quarto-table-cell-role="th">Potential</th>
<th data-quarto-table-cell-role="th">Club</th>
<th data-quarto-table-cell-role="th">Club Logo</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">SlidingTackle</th>
<th data-quarto-table-cell-role="th">GKDiving</th>
<th data-quarto-table-cell-role="th">GKHandling</th>
<th data-quarto-table-cell-role="th">GKKicking</th>
<th data-quarto-table-cell-role="th">GKPositioning</th>
<th data-quarto-table-cell-role="th">GKReflexes</th>
<th data-quarto-table-cell-role="th">Best Position</th>
<th data-quarto-table-cell-role="th">Best Overall Rating</th>
<th data-quarto-table-cell-role="th">Release Clause</th>
<th data-quarto-table-cell-role="th">DefensiveAwareness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>212198</td>
<td>Bruno Fernandes</td>
<td>26</td>
<td>https://cdn.sofifa.com/players/212/198/22_60.png</td>
<td>Portugal</td>
<td>https://cdn.sofifa.com/flags/pt.png</td>
<td>88</td>
<td>89</td>
<td>Manchester United</td>
<td>https://cdn.sofifa.com/teams/11/30.png</td>
<td>...</td>
<td>65.0</td>
<td>12.0</td>
<td>14.0</td>
<td>15.0</td>
<td>8.0</td>
<td>14.0</td>
<td>CAM</td>
<td>88.0</td>
<td>€206.9M</td>
<td>72.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>209658</td>
<td>L. Goretzka</td>
<td>26</td>
<td>https://cdn.sofifa.com/players/209/658/22_60.png</td>
<td>Germany</td>
<td>https://cdn.sofifa.com/flags/de.png</td>
<td>87</td>
<td>88</td>
<td>FC Bayern München</td>
<td>https://cdn.sofifa.com/teams/21/30.png</td>
<td>...</td>
<td>77.0</td>
<td>13.0</td>
<td>8.0</td>
<td>15.0</td>
<td>11.0</td>
<td>9.0</td>
<td>CM</td>
<td>87.0</td>
<td>€160.4M</td>
<td>74.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>176580</td>
<td>L. Suárez</td>
<td>34</td>
<td>https://cdn.sofifa.com/players/176/580/22_60.png</td>
<td>Uruguay</td>
<td>https://cdn.sofifa.com/flags/uy.png</td>
<td>88</td>
<td>88</td>
<td>Atlético de Madrid</td>
<td>https://cdn.sofifa.com/teams/240/30.png</td>
<td>...</td>
<td>38.0</td>
<td>27.0</td>
<td>25.0</td>
<td>31.0</td>
<td>33.0</td>
<td>37.0</td>
<td>ST</td>
<td>88.0</td>
<td>€91.2M</td>
<td>42.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>192985</td>
<td>K. De Bruyne</td>
<td>30</td>
<td>https://cdn.sofifa.com/players/192/985/22_60.png</td>
<td>Belgium</td>
<td>https://cdn.sofifa.com/flags/be.png</td>
<td>91</td>
<td>91</td>
<td>Manchester City</td>
<td>https://cdn.sofifa.com/teams/10/30.png</td>
<td>...</td>
<td>53.0</td>
<td>15.0</td>
<td>13.0</td>
<td>5.0</td>
<td>10.0</td>
<td>13.0</td>
<td>CM</td>
<td>91.0</td>
<td>€232.2M</td>
<td>68.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>224334</td>
<td>M. Acuña</td>
<td>29</td>
<td>https://cdn.sofifa.com/players/224/334/22_60.png</td>
<td>Argentina</td>
<td>https://cdn.sofifa.com/flags/ar.png</td>
<td>84</td>
<td>84</td>
<td>Sevilla FC</td>
<td>https://cdn.sofifa.com/teams/481/30.png</td>
<td>...</td>
<td>82.0</td>
<td>8.0</td>
<td>14.0</td>
<td>13.0</td>
<td>13.0</td>
<td>14.0</td>
<td>LB</td>
<td>84.0</td>
<td>€77.7M</td>
<td>80.0</td>
</tr>
</tbody>
</table>

<p>5 rows × 63 columns</p>
</div>
</div>
</div>
<p>아래의 딕셔너리를 이용하여 <code>Position</code>열을 변환하고 물음에 답하라.</p>
<div id="3e5c2967-e0cd-47ce-8510-b422a72e9868" class="cell" data-tags="[]" data-execution_count="247">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>position_dict <span class="op">=</span> {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'GOALKEEPER'</span>:{<span class="st">'GK'</span>},</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'DEFENDER'</span>:{<span class="st">'CB'</span>,<span class="st">'RCB'</span>,<span class="st">'LCB'</span>,<span class="st">'RB'</span>,<span class="st">'LB'</span>,<span class="st">'RWB'</span>,<span class="st">'LWB'</span>},</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'MIDFIELDER'</span>:{<span class="st">'CM'</span>,<span class="st">'RCM'</span>,<span class="st">'LCM'</span>,<span class="st">'CDM'</span>,<span class="st">'RDM'</span>,<span class="st">'LDM'</span>,<span class="st">'CAM'</span>,<span class="st">'RAM'</span>,<span class="st">'LAM'</span>,<span class="st">'RM'</span>,<span class="st">'LM'</span>},</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'FORWARD'</span>:{<span class="st">'ST'</span>,<span class="st">'CF'</span>,<span class="st">'RF'</span>,<span class="st">'LF'</span>,<span class="st">'RW'</span>,<span class="st">'LW'</span>,<span class="st">'RS'</span>,<span class="st">'LS'</span>},</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'SUB'</span>:{<span class="st">'SUB'</span>},</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'RES'</span>:{<span class="st">'RES'</span>}</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>position_dict</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="247">
<pre><code>{'GOALKEEPER': {'GK'},
 'DEFENDER': {'CB', 'LB', 'LCB', 'LWB', 'RB', 'RCB', 'RWB'},
 'MIDFIELDER': {'CAM',
  'CDM',
  'CM',
  'LAM',
  'LCM',
  'LDM',
  'LM',
  'RAM',
  'RCM',
  'RDM',
  'RM'},
 'FORWARD': {'CF', 'LF', 'LS', 'LW', 'RF', 'RS', 'RW', 'ST'},
 'SUB': {'SUB'},
 'RES': {'RES'}}</code></pre>
</div>
</div>
<section id="나이와-포지션에-따른-선수-가치-및-급여-분석-10점" class="level2">
<h2 class="anchored" data-anchor-id="나이와-포지션에-따른-선수-가치-및-급여-분석-10점"><code>(1)</code> 나이와 포지션에 따른 선수 가치 및 급여 분석 – 10점</h2>
<p>나이에 따른 선수가치(Value)와 급여(Wage)의 산점도를 포지션별로 시각화 하고 추세선을 그려라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/0e7e3fca-f670-46f9-880a-65a145e9afeb-1-04a2b95a-8032-448f-9092-37bd1419e808.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>Value</code>와 <code>Wage</code>는 log값을 취하여 시각화 하라.</p>
<p><code>2</code>. <code>geom_point</code>를 사용할 시<code>alpha=0.2</code>, <code>size=0.1</code>, <code>position='jitter'</code>로 설정하라.</p>
<p><code>3</code>. <code>SUB</code>와 <code>RES</code> 포지션은 제외하고 시각화 할 것</p>
<hr>
<p><code>(풀이)</code></p>
<div id="6a2e62a6-ed41-437c-94d6-d3200a59726c" class="cell" data-tags="[]" data-execution_count="248">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.assign(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    Position <span class="op">=</span> df.Position.<span class="bu">str</span>.split(<span class="st">'&gt;'</span>).<span class="bu">str</span>[<span class="op">-</span><span class="dv">1</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> position_dict.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop()),</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    Value <span class="op">=</span> df.Value.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    Wage <span class="op">=</span> df.Wage.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>).<span class="bu">eval</span>(<span class="st">'logValue = log(Value)'</span>).<span class="bu">eval</span>(<span class="st">'logWage = log(Wage)'</span>)<span class="op">\</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'Position'</span>,<span class="st">'Age'</span>,<span class="st">'logValue'</span>,<span class="st">'logWage'</span>]].melt(id_vars<span class="op">=</span>[<span class="st">'Position'</span>,<span class="st">'Age'</span>])<span class="op">\</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>.set_axis([<span class="st">'Position'</span>,<span class="st">'Age'</span>,<span class="st">'FinancialMetric'</span>,<span class="st">'LogAmount'</span>],axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"(Position != 'SUB') and (Position != 'RES')"</span>))</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'Age'</span>,y<span class="op">=</span><span class="st">'LogAmount'</span>,color<span class="op">=</span><span class="st">'FinancialMetric'</span>),alpha<span class="op">=</span><span class="fl">0.2</span>,size<span class="op">=</span><span class="fl">0.1</span>,position<span class="op">=</span><span class="st">'jitter'</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'Age'</span>,y<span class="op">=</span><span class="st">'LogAmount'</span>,color<span class="op">=</span><span class="st">'FinancialMetric'</span>))</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'Position'</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="골키퍼-능력치별-로그급여-추세-10점" class="level2">
<h2 class="anchored" data-anchor-id="골키퍼-능력치별-로그급여-추세-10점"><code>(2)</code> 골키퍼 능력치별 로그급여 추세 – 10점</h2>
<p>아래의 리스트는 골키퍼와 관련된 능력치이다.</p>
<div id="33ce5daf-8c87-4e49-a7ee-30809810cd67" class="cell" data-tags="[]" data-execution_count="249">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>gkstats <span class="op">=</span> [<span class="st">'GKDiving'</span>,<span class="st">'GKHandling'</span>, <span class="st">'GKKicking'</span>, <span class="st">'GKPositioning'</span>, <span class="st">'GKReflexes'</span>]</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>gkstats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="249">
<pre><code>['GKDiving', 'GKHandling', 'GKKicking', 'GKPositioning', 'GKReflexes']</code></pre>
</div>
</div>
<p><code>gkstats</code> 에 해당하는 능력치와 로그급여(<code>logWage</code>)를 산점도로 시각화하고 추세선을 추가하라.</p>
<p><strong>시각화예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/f7a6d528-64d8-4b22-bef9-ba12cd7c77ee-1-08cd6207-bce2-4c72-a761-cdc1d92a3178.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. 포지션이 “골키퍼”인 선수에 한정하여 시각화 할 것</p>
<p><code>2</code>. <code>geom_point</code>를 사용할 시 <code>alpha=0.5</code>,<code>size=0.5</code>,<code>position='jitter'</code> 를 설정하라.</p>
<hr>
<p><code>(풀이)</code></p>
<div id="dd15dd16-452d-4687-b4a6-39b29a6ab8cc" class="cell" data-tags="[]" data-execution_count="251">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.assign(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    Position <span class="op">=</span> df.Position.<span class="bu">str</span>.split(<span class="st">'&gt;'</span>).<span class="bu">str</span>[<span class="op">-</span><span class="dv">1</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> position_dict.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop()),</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    Value <span class="op">=</span> df.Value.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>),</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    Wage <span class="op">=</span> df.Wage.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>).<span class="bu">eval</span>(<span class="st">'logWage = log(Wage)'</span>).query(<span class="st">"Position=='GOALKEEPER'"</span>)<span class="op">\</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'Age'</span>,<span class="st">'logWage'</span>]<span class="op">+</span>gkstats]<span class="op">\</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>.melt(id_vars<span class="op">=</span>[<span class="st">'Age'</span>,<span class="st">'logWage'</span>])<span class="op">\</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>.set_axis([<span class="st">'Age'</span>,<span class="st">'logWage'</span>,<span class="st">'AbilType'</span>,<span class="st">'Abil'</span>],axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>tidydata</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'Abil'</span>,y<span class="op">=</span><span class="st">'logWage'</span>,color<span class="op">=</span><span class="st">'AbilType'</span>),alpha<span class="op">=</span><span class="fl">0.5</span>,size<span class="op">=</span><span class="fl">0.5</span>,position<span class="op">=</span><span class="st">'jitter'</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'Abil'</span>,y<span class="op">=</span><span class="st">'logWage'</span>,color<span class="op">=</span><span class="st">'AbilType'</span>))</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'AbilType'</span>)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> point <span class="op">+</span> facet <span class="op">+</span> smooth </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-17-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gkability에-따른-골키퍼의-overall-예측-20점" class="level2">
<h2 class="anchored" data-anchor-id="gkability에-따른-골키퍼의-overall-예측-20점"><code>(3)</code> “GKAbility”에 따른 골키퍼의 Overall 예측 – 20점</h2>
<p>아래의 리스트는 골키퍼와 관련된 능력치이다.</p>
<div id="f7897087-8c46-4855-808a-5a5add1db199" class="cell" data-tags="[]" data-execution_count="252">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>gkstats <span class="op">=</span> [<span class="st">'GKDiving'</span>,<span class="st">'GKHandling'</span>, <span class="st">'GKKicking'</span>, <span class="st">'GKPositioning'</span>, <span class="st">'GKReflexes'</span>]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>gkstats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="252">
<pre><code>['GKDiving', 'GKHandling', 'GKKicking', 'GKPositioning', 'GKReflexes']</code></pre>
</div>
</div>
<p><code>gkstats</code> 에 해당하는 능력치의 평균을 계산하고 <code>GKAbility</code>라는 변수에 저장하라. 골키퍼 포지션과 공격수 포지션을 가지는 선수들에 한정하여 <code>GKAbility</code>와 <code>OveraAll</code>(=선수의 전반적 능력치)의 관계를 산점도로 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/0efc6414-c5b7-4185-9761-438beb9d8826-1-1fddf3ad-2408-4dd8-9736-84baa944b336.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>ID=212198</code>인 선수 <code>Bruno Fernandes</code>의 경우 <code>GKAbility</code>를 아래와 같이 계산할 수 있다.</p>
<p><span class="math display">\[\text{Bruno Fernandes의 GKAbility} = \frac{\text{Bruno Fernandes의 GKDiving} + \dots + \text{Bruno Fernandes의 GKReflexes}}{5}\]</span></p>
<p><code>2</code>. 시각화를 위한 세부옵션은 아래의 코드를 참고하라.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'GKAbility'</span>,y<span class="op">=</span><span class="st">'Overall'</span>,size<span class="op">=</span><span class="st">'logWage'</span>,alpha<span class="op">=</span><span class="st">'logWage'</span>,color<span class="op">=</span><span class="st">'Position'</span>),position<span class="op">=</span><span class="st">'jitter'</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'GKAbility'</span>,y<span class="op">=</span><span class="st">'Overall'</span>),linetype<span class="op">=</span><span class="st">'dashed'</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'Position'</span>,scales<span class="op">=</span><span class="st">'free'</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p><code>(풀이)</code></p>
<div id="223a7020-60ba-41ae-a02e-72908809a865" class="cell" data-tags="[]" data-execution_count="253">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.assign(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    Position <span class="op">=</span> df.Position.<span class="bu">str</span>.split(<span class="st">'&gt;'</span>).<span class="bu">str</span>[<span class="op">-</span><span class="dv">1</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> position_dict.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop()),</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    Value <span class="op">=</span> df.Value.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>),</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    Wage <span class="op">=</span> df.Wage.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>).<span class="bu">eval</span>(<span class="st">'logWage = log(Wage)'</span>)<span class="op">\</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>.query(<span class="st">"Position=='GOALKEEPER' or Position=='FORWARD'"</span>)<span class="op">\</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'Position'</span>,<span class="st">'logWage'</span>,<span class="st">'Overall'</span>]<span class="op">+</span>gkstats]<span class="op">\</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>.assign(GKAbility <span class="op">=</span> <span class="kw">lambda</span> df: df.loc[:,<span class="st">'GKDiving'</span>:<span class="st">'GKReflexes'</span>].<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'GKAbility'</span>,y<span class="op">=</span><span class="st">'Overall'</span>,size<span class="op">=</span><span class="st">'logWage'</span>,alpha<span class="op">=</span><span class="st">'logWage'</span>,color<span class="op">=</span><span class="st">'Position'</span>),position<span class="op">=</span><span class="st">'jitter'</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'GKAbility'</span>,y<span class="op">=</span><span class="st">'Overall'</span>),linetype<span class="op">=</span><span class="st">'dashed'</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'Position'</span>,scales<span class="op">=</span><span class="st">'free'</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="포워드와-수비수의-기술별-가치-평가-25점" class="level2">
<h2 class="anchored" data-anchor-id="포워드와-수비수의-기술별-가치-평가-25점"><code>(4)</code> 포워드와 수비수의 기술별 가치 평가 – 25점</h2>
<p>아래는 축구선수의 능력치와 관련이 있는 column들의 리스트이다. (골키퍼 관련 능력치는 제외하였음)</p>
<div id="3143913c-b295-4107-93b1-d37eabfa356d" class="cell" data-tags="[]" data-execution_count="254">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>abilities_list <span class="op">=</span> [<span class="st">'Crossing'</span>, <span class="st">'Finishing'</span>, <span class="st">'HeadingAccuracy'</span>, <span class="st">'ShortPassing'</span>, <span class="st">'Volleys'</span>, <span class="st">'Dribbling'</span>, <span class="st">'Curve'</span>, <span class="st">'FKAccuracy'</span>, <span class="st">'LongPassing'</span>, <span class="st">'BallControl'</span>, <span class="st">'Acceleration'</span>, <span class="st">'SprintSpeed'</span>, <span class="st">'Agility'</span>, <span class="st">'Reactions'</span>, <span class="st">'Balance'</span>, <span class="st">'ShotPower'</span>, <span class="st">'Jumping'</span>, <span class="st">'Stamina'</span>, <span class="st">'Strength'</span>, <span class="st">'LongShots'</span>, <span class="st">'Aggression'</span>, <span class="st">'Interceptions'</span>, <span class="st">'Positioning'</span>, <span class="st">'Vision'</span>, <span class="st">'Penalties'</span>, <span class="st">'Composure'</span>, <span class="st">'StandingTackle'</span>, <span class="st">'SlidingTackle'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>아래는 위의 <code>abilities_list</code>을 적당한 카테고리로 묶은 것이다.</p>
<div id="71a844b1-d137-49c4-92bb-26dd70c6cf3b" class="cell" data-tags="[]" data-execution_count="255">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>abilities_categories <span class="op">=</span> {</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FinishingSkills"</span>: [<span class="st">'Finishing'</span>, <span class="st">'HeadingAccuracy'</span>, <span class="st">'Volleys'</span>, <span class="st">'LongShots'</span>, <span class="st">'Positioning'</span>, <span class="st">'Vision'</span>, <span class="st">'Penalties'</span>, <span class="st">'ShotPower'</span>, <span class="st">'Jumping'</span>],</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"BallControl_Passing"</span>: [<span class="st">'Dribbling'</span>, <span class="st">'Curve'</span>, <span class="st">'Crossing'</span>,<span class="st">'ShortPassing'</span>, <span class="st">'LongPassing'</span>, <span class="st">'BallControl'</span>,<span class="st">'FKAccuracy'</span>],</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Speed_Stamina"</span>: [<span class="st">'Acceleration'</span>, <span class="st">'SprintSpeed'</span>, <span class="st">'Agility'</span>, <span class="st">'Stamina'</span>],</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Reactions_PhysicalAttributes"</span>: [<span class="st">'Reactions'</span>, <span class="st">'Balance'</span>, <span class="st">'Strength'</span>, <span class="st">'Composure'</span>],</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DefensiveSkills"</span>: [<span class="st">'Aggression'</span>, <span class="st">'Interceptions'</span>, <span class="st">'StandingTackle'</span>, <span class="st">'SlidingTackle'</span>]</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>선수들의 여러 능력치를 <code>abilities_categories</code>에 따라 통합하고 각 스킬 카테고리별로 선수의 능력치의 평균을 구하여 <code>SkillValueCategories</code>값에 저장하라. 정리된 자료의 예시는 아래와 같다.</p>
<p><img src="10wk-supp-mid-sol_files/figure-html/c9f24126-80dc-4096-b143-3e3fb3adb1c5-1-46ff6bfd-875c-40d3-b9d9-a7f795d896fa.png" class="img-fluid"></p>
<p>위의 자료를 바탕으로 <code>SkillValueCategories</code>와 <code>logValue</code>의 산점도를 포지션별로 시각화 하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/e01790f8-4fcb-4ea0-9b7d-46cf24d54732-1-8c1061cd-273c-432b-b288-eb5e1eedb86b.png" class="img-fluid"></p>
<p><strong>힌트</strong></p>
<p><code>-</code> 아래의 데이터프레임에서</p>
<p><img src="10wk-supp-mid-sol_files/figure-html/9d306dd2-e865-4c95-9631-c46aaef06da7-1-46ff6bfd-875c-40d3-b9d9-a7f795d896fa.png" class="img-fluid"></p>
<p>마지막 row의 SkillValueCategories의 값은 아래와 같이 구하였다.</p>
<p><span class="math display">\[14.250 = \frac{\text{259646선수의 Aggression}+\dots+\text{259646선수의 SlidingTackle}}{4}=\frac{24+6+14+13}{4} \]</span></p>
<div id="b6f5f449-2595-41c3-b089-e2722b99d65e" class="cell" data-tags="[]" data-execution_count="256">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">24</span><span class="op">+</span><span class="dv">6</span><span class="op">+</span><span class="dv">14</span><span class="op">+</span><span class="dv">13</span>)<span class="op">/</span><span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="256">
<pre><code>14.25</code></pre>
</div>
</div>
<p><code>-</code> 시각화를 위해 아래의 코드를 참고하라.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD' or Position=='DEFENDER'"</span>))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>),alpha<span class="op">=</span><span class="fl">0.05</span>,size<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet).draw()</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
문제4에 대한 추가설명
</div>
</div>
<div class="callout-body-container callout-body">
<p>많은 학생들이 지적하였는데요, 이 문제의 경우는 각 능력치 통합에 필요한 열의 개수가 차이가 있어서 문제예시에 표현된 데이터프레임을 그대로 사용하기 보다 <code>SkillType</code>, <code>SkillValue</code> 열을 제거한뒤 중복된 row를 제거하고 시각화하는 것이 더 올바릅니다. 즉 표에 보이는 데이터가 <code>tidydata</code>로 되어있다면</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>tidydata.drop([<span class="st">'SkillType'</span>,<span class="st">'SkillValue'</span>],axis<span class="op">=</span><span class="dv">1</span>).drop_duplicates() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>와 같이 변환해준뒤에 시각화를 하는게 더 정확합니다.</p>
<p>제가 문제를 낼때</p>
<p><span class="math display">\[14.250 = \frac{\text{259646선수의 Aggression}+\dots+\text{259646선수의 SlidingTackle}}{4}=\frac{24+6+14+13}{4} \]</span></p>
<p>와 같은 계산예시를 좀 더 명확하게 설명하고자 하다보니 이런일이.. 아무튼 시험문항은 중복값을 제거하든 제거하지 않든 만점으로 채점하였습니다.</p>
</div>
</div>
<hr>
<p><code>(풀이1)</code></p>
<div id="2a5b0594-c955-4ec2-9f48-0e25f98a675d" class="cell" data-tags="[]" data-execution_count="289">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>big <span class="op">=</span> df.assign(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    Position <span class="op">=</span> df.Position.<span class="bu">str</span>.split(<span class="st">'&gt;'</span>).<span class="bu">str</span>[<span class="op">-</span><span class="dv">1</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> position_dict.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop()),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    Value <span class="op">=</span> df.Value.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>),</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    Wage <span class="op">=</span> df.Wage.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>).<span class="bu">eval</span>(<span class="st">'logValue=log(Value)'</span>)<span class="op">\</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'ID'</span>,<span class="st">'Position'</span>,<span class="st">'logValue'</span>]<span class="op">+</span>abilities_list]<span class="op">\</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>.melt(id_vars<span class="op">=</span>[<span class="st">'Position'</span>,<span class="st">'ID'</span>,<span class="st">'logValue'</span>])<span class="op">\</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>.rename({<span class="st">'variable'</span>:<span class="st">'SkillType'</span>,<span class="st">'value'</span>:<span class="st">'SkillValue'</span>},axis<span class="op">=</span><span class="dv">1</span>)<span class="op">\</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>.assign(</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>     SkillTypeCategories <span class="op">=</span> <span class="kw">lambda</span> df: df.SkillType.<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> abilities_categories.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop())</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>small <span class="op">=</span> big.groupby([<span class="st">'ID'</span>,<span class="st">'SkillTypeCategories'</span>]).agg({<span class="st">'SkillValue'</span>:<span class="st">'mean'</span>},axis<span class="op">=</span><span class="dv">1</span>).reset_index().rename({<span class="st">'SkillValue'</span>:<span class="st">'SkillValueCategories'</span>},axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> big.merge(small)<span class="co">#.drop(['SkillType','SkillValue'],axis=1).drop_duplicates() </span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD' or Position=='DEFENDER'"</span>))</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>),alpha<span class="op">=</span><span class="fl">0.05</span>,size<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>))</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet).draw()</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="289">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-23-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><code>(풀이2)</code> – merge를 죽어도 쓰기 싫다면..</p>
<div id="d56e3f8e-e46e-4165-a83d-8fbeb035926a" class="cell" data-tags="[]" data-execution_count="257">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.assign(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    Position <span class="op">=</span> df.Position.<span class="bu">str</span>.split(<span class="st">'&gt;'</span>).<span class="bu">str</span>[<span class="op">-</span><span class="dv">1</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> position_dict.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop()),</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    Value <span class="op">=</span> df.Value.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    Wage <span class="op">=</span> df.Wage.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>).<span class="bu">eval</span>(<span class="st">'logValue=log(Value)'</span>)<span class="op">\</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'ID'</span>,<span class="st">'Position'</span>,<span class="st">'logValue'</span>]<span class="op">+</span>abilities_list]<span class="op">\</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>.melt(id_vars<span class="op">=</span>[<span class="st">'Position'</span>,<span class="st">'ID'</span>,<span class="st">'logValue'</span>])<span class="op">\</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>.rename({<span class="st">'variable'</span>:<span class="st">'SkillType'</span>,<span class="st">'value'</span>:<span class="st">'SkillValue'</span>},axis<span class="op">=</span><span class="dv">1</span>)<span class="op">\</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>.assign(</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>     SkillTypeCategories <span class="op">=</span> <span class="kw">lambda</span> df: df.SkillType.<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> abilities_categories.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop())</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>).pivot_table(index<span class="op">=</span>[<span class="st">'ID'</span>,<span class="st">'logValue'</span>,<span class="st">'Position'</span>,<span class="st">'SkillTypeCategories'</span>],values<span class="op">=</span><span class="st">'SkillValue'</span>)<span class="op">\</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>.reset_index().rename({<span class="st">'SkillValue'</span>:<span class="st">'SkillValueCategories'</span>},axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD' or Position=='DEFENDER'"</span>))</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> geom_point(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>),alpha<span class="op">=</span><span class="fl">0.3</span>,size<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>smooth <span class="op">=</span> geom_smooth(aes(x<span class="op">=</span><span class="st">'SkillValueCategories'</span>,y<span class="op">=</span><span class="st">'logValue'</span>,color<span class="op">=</span><span class="st">'Position'</span>))</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> point <span class="op">+</span> smooth <span class="op">+</span> facet).draw()</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="257">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-24-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="스킬-카테고리별-선수의-로그-연봉-분석-25점" class="level2">
<h2 class="anchored" data-anchor-id="스킬-카테고리별-선수의-로그-연봉-분석-25점"><code>(5)</code> 스킬 카테고리별 선수의 로그 연봉 분석 – 25점</h2>
<p>공격수 포지션을 가진 선수들의 특정 능력치가 그들의 Value에 얼마나 영향을 주는지 알아보고자 한다. 선수들의 logValue를 10개의 구간으로 나눈 후, 각 구간별로 [‘FinishingSkills’,…,‘DefensiveSkills’]의 통합능력치 평균을 바 플롯(bar plot)으로 시각화하라.</p>
<p><strong>시각화 예시</strong></p>
<p><img src="10wk-supp-mid-sol_files/figure-html/8fe66166-9ffa-4197-9ed0-4352ca6c2257-1-f8e8d318-7f10-4f55-a4eb-dc1ac195a5b2.png" class="img-fluid"></p>
<p><strong>세부지침</strong></p>
<p><code>1</code>. <code>logValue</code>는 <code>pd.qcut</code>을 이용하여 분할하고 이때 <code>q=10</code>으로 설정하라.</p>
<p><code>2</code>. 시각화를 위해 아래의 코드를 사용하라.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD'"</span>)) </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'logValueCut'</span>,y<span class="op">=</span><span class="st">'SkillValueCategories'</span>,fill<span class="op">=</span><span class="st">'logValueCut'</span>),position<span class="op">=</span><span class="st">'dodge'</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> col <span class="op">+</span> facet <span class="op">+</span> theme(axis_text_x<span class="op">=</span>element_blank(), axis_ticks<span class="op">=</span>element_blank())).draw()</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p><code>(풀이1)</code></p>
<div id="c57626b1-00c4-4c66-92b8-925b70e2d093" class="cell" data-tags="[]" data-execution_count="280">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>big <span class="op">=</span> df.assign(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    Position <span class="op">=</span> df.Position.<span class="bu">str</span>.split(<span class="st">'&gt;'</span>).<span class="bu">str</span>[<span class="op">-</span><span class="dv">1</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> position_dict.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop()),</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    Value <span class="op">=</span> df.Value.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>),</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    Wage <span class="op">=</span> df.Wage.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>).assign(logValueCut<span class="op">=</span> <span class="kw">lambda</span> df: pd.qcut(np.log(df.Value),q<span class="op">=</span><span class="dv">10</span>))<span class="op">\</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'ID'</span>,<span class="st">'Position'</span>,<span class="st">'logValueCut'</span>]<span class="op">+</span>abilities_list]<span class="op">\</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>.melt(id_vars<span class="op">=</span>[<span class="st">'Position'</span>,<span class="st">'ID'</span>,<span class="st">'logValueCut'</span>])<span class="op">\</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>.rename({<span class="st">'variable'</span>:<span class="st">'SkillType'</span>,<span class="st">'value'</span>:<span class="st">'SkillValue'</span>},axis<span class="op">=</span><span class="dv">1</span>)<span class="op">\</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>.assign(</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>     SkillTypeCategories <span class="op">=</span> <span class="kw">lambda</span> df: df.SkillType.<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> abilities_categories.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop())</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>small <span class="op">=</span> big.groupby([<span class="st">'ID'</span>,<span class="st">'SkillTypeCategories'</span>]).agg({<span class="st">'SkillValue'</span>:<span class="st">'mean'</span>}).reset_index().rename({<span class="st">'SkillValue'</span>:<span class="st">'SkillValueCategories'</span>},axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> big.merge(small)<span class="co">#.drop(['SkillType','SkillValue'],axis=1).drop_duplicates()</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD'"</span>)) </span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'logValueCut'</span>,y<span class="op">=</span><span class="st">'SkillValueCategories'</span>,fill<span class="op">=</span><span class="st">'logValueCut'</span>),position<span class="op">=</span><span class="st">'dodge'</span>)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> col <span class="op">+</span> facet <span class="op">+</span> theme(axis_text_x<span class="op">=</span>element_blank(), axis_ticks<span class="op">=</span>element_blank())).draw()</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="280">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-25-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><code>(풀이2)</code> – merge를 죽어도 쓰기 싫다면..</p>
<div id="c5166df9-0211-4be0-9c14-3780bd9a3baa" class="cell" data-tags="[]" data-execution_count="288">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.assign(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    Position <span class="op">=</span> df.Position.<span class="bu">str</span>.split(<span class="st">'&gt;'</span>).<span class="bu">str</span>[<span class="op">-</span><span class="dv">1</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> position_dict.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop()),</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    Value <span class="op">=</span> df.Value.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    Wage <span class="op">=</span> df.Wage.<span class="bu">str</span>[<span class="dv">1</span>:].<span class="bu">str</span>.replace(<span class="st">'M'</span>,<span class="st">'*1000000'</span>).<span class="bu">str</span>.replace(<span class="st">'K'</span>,<span class="st">'*1000'</span>).<span class="bu">apply</span>(<span class="bu">eval</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>).assign(logValueCut<span class="op">=</span> <span class="kw">lambda</span> df: pd.qcut(np.log(df.Value),q<span class="op">=</span><span class="dv">10</span>))<span class="op">\</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>.loc[:,[<span class="st">'ID'</span>,<span class="st">'Position'</span>,<span class="st">'logValueCut'</span>]<span class="op">+</span>abilities_list]<span class="op">\</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>.melt(id_vars<span class="op">=</span>[<span class="st">'Position'</span>,<span class="st">'ID'</span>,<span class="st">'logValueCut'</span>])<span class="op">\</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>.rename({<span class="st">'variable'</span>:<span class="st">'SkillType'</span>,<span class="st">'value'</span>:<span class="st">'SkillValue'</span>},axis<span class="op">=</span><span class="dv">1</span>)<span class="op">\</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>.assign(</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>     SkillTypeCategories <span class="op">=</span> <span class="kw">lambda</span> df: df.SkillType.<span class="bu">apply</span>(<span class="kw">lambda</span> x: [k <span class="cf">for</span> k,v <span class="kw">in</span> abilities_categories.items() <span class="cf">if</span> x <span class="kw">in</span> v].pop())</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>).pivot_table(index<span class="op">=</span>[<span class="st">'ID'</span>,<span class="st">'Position'</span>,<span class="st">'logValueCut'</span>,<span class="st">'SkillTypeCategories'</span>],values<span class="op">=</span><span class="st">'SkillValue'</span>)<span class="op">\</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>.reset_index().rename({<span class="st">'SkillValue'</span>:<span class="st">'SkillValueCategories'</span>},axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co">#---#</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> ggplot(tidydata.query(<span class="st">"Position=='FORWARD'"</span>)) </span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> geom_col(aes(x<span class="op">=</span><span class="st">'logValueCut'</span>,y<span class="op">=</span><span class="st">'SkillValueCategories'</span>,fill<span class="op">=</span><span class="st">'logValueCut'</span>),position<span class="op">=</span><span class="st">'dodge'</span>)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>facet <span class="op">=</span> facet_wrap(<span class="st">'SkillTypeCategories'</span>)</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> (fig <span class="op">+</span> col <span class="op">+</span> facet <span class="op">+</span> theme(axis_text_x<span class="op">=</span>element_blank(), axis_ticks<span class="op">=</span>element_blank())).draw()</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>fig.set_dpi(<span class="dv">150</span>)</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="dv">8</span>,<span class="dv">5</span>)</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="288">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-26-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="시각화의-해석-30점" class="level1 page-columns page-full">
<h1>3. 시각화의 해석 – 30점</h1>
<section id="심슨의-역설-10점" class="level2">
<h2 class="anchored" data-anchor-id="심슨의-역설-10점"><code>(1)</code> 심슨의 역설 – 10점</h2>
<p>다음은 농구선수 A,B 의 시즌별 자유투 성공률이다.</p>
<div id="ebb96aa4-daa2-428a-a527-0a9d96409d77" class="cell" data-tags="[]" data-execution_count="784">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Player'</span>: [<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>], </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Season'</span>: [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>]<span class="op">*</span><span class="dv">2</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Status'</span>: [<span class="st">'Success'</span>,<span class="st">'Failure'</span>]<span class="op">*</span><span class="dv">4</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Count'</span>: [<span class="dv">7</span>,<span class="dv">3</span>,<span class="va">None</span>,<span class="va">None</span>,<span class="va">None</span>,<span class="va">None</span>,<span class="dv">4</span>,<span class="dv">0</span>]</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="784">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Player</th>
<th data-quarto-table-cell-role="th">Season</th>
<th data-quarto-table-cell-role="th">Status</th>
<th data-quarto-table-cell-role="th">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>A</td>
<td>1</td>
<td>Success</td>
<td>7.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>A</td>
<td>1</td>
<td>Failure</td>
<td>3.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>A</td>
<td>2</td>
<td>Success</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>A</td>
<td>2</td>
<td>Failure</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B</td>
<td>1</td>
<td>Success</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>B</td>
<td>1</td>
<td>Failure</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>B</td>
<td>2</td>
<td>Success</td>
<td>4.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>B</td>
<td>2</td>
<td>Failure</td>
<td>0.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>적절한 값을 채워 시즌 1,2 모두 B선수의 자유투 성공률이 높지만 시즌1-2를 전체 합치면 A선수의 자유투 성공률이 더 높도록 하라. (즉 적절한 값을 채워 심슨의 역설을 설명하기 위한 자료를 구성하라.) 만들어진 자료를 바탕으로 심슨의 역설을 시각화하라. (즉 시즌별 자유투 성공률과 전체 자유투 성공률을 barplot으로 시각화하라)</p>
<p><code>(풀이)</code></p>
<p><strong><em>Step1: 예시만들기</em></strong></p>
<div id="23236547-2881-4053-a8a3-ee8740c6c0f2" class="cell" data-tags="[]" data-execution_count="338">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Player'</span>: [<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'A'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>], </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Season'</span>: [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>]<span class="op">*</span><span class="dv">2</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Status'</span>: [<span class="st">'Success'</span>,<span class="st">'Failure'</span>]<span class="op">*</span><span class="dv">4</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Count'</span>: [<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">950</span>,<span class="dv">50</span>,<span class="dv">8</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">0</span>]</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="9468e3c4-12a9-4ccd-b754-26dde97e9cb6" class="cell" data-tags="[]" data-execution_count="339">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>df.pivot_table(index<span class="op">=</span><span class="st">'Player'</span>,columns<span class="op">=</span>[<span class="st">'Season'</span>,<span class="st">'Status'</span>],values<span class="op">=</span><span class="st">'Count'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="339">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Season</th>
<th colspan="2" data-quarto-table-cell-role="th" data-halign="left">1</th>
<th colspan="2" data-quarto-table-cell-role="th" data-halign="left">2</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Status</th>
<th data-quarto-table-cell-role="th">Failure</th>
<th data-quarto-table-cell-role="th">Success</th>
<th data-quarto-table-cell-role="th">Failure</th>
<th data-quarto-table-cell-role="th">Success</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">Player</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">A</td>
<td>3.0</td>
<td>7.0</td>
<td>50.0</td>
<td>950.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">B</td>
<td>2.0</td>
<td>8.0</td>
<td>0.0</td>
<td>4.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>시즌별 성공률은 A가 낮지만</p>
<div id="b73942df-fe52-4bb3-affd-2c664bf9686b" class="cell" data-tags="[]" data-execution_count="357">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 시즌1</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>{<span class="st">'A'</span>:<span class="dv">7</span><span class="op">/</span>(<span class="dv">3</span><span class="op">+</span><span class="dv">7</span>), <span class="st">'B'</span>:<span class="dv">8</span><span class="op">/</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">8</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="357">
<pre><code>{'A': 0.7, 'B': 0.8}</code></pre>
</div>
</div>
<div id="ea31d516-1f6d-46d0-9715-ddff0eba13b1" class="cell" data-tags="[]" data-execution_count="358">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 시즌2</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>{<span class="st">'A'</span>:<span class="dv">950</span><span class="op">/</span>(<span class="dv">50</span><span class="op">+</span><span class="dv">950</span>), <span class="st">'B'</span>:<span class="dv">4</span><span class="op">/</span>(<span class="dv">0</span><span class="op">+</span><span class="dv">4</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="358">
<pre><code>{'A': 0.95, 'B': 1.0}</code></pre>
</div>
</div>
<p>전체 성공률은 A가 높다.</p>
<div id="9ac4756d-49a5-4953-94cc-827bf8f4cee0" class="cell" data-tags="[]" data-execution_count="359">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>{<span class="st">'A'</span>:(<span class="dv">7</span><span class="op">+</span><span class="dv">950</span>)<span class="op">/</span>(<span class="dv">3</span><span class="op">+</span><span class="dv">7</span><span class="op">+</span><span class="dv">50</span><span class="op">+</span><span class="dv">950</span>), <span class="st">'B'</span>:(<span class="dv">8</span><span class="op">+</span><span class="dv">4</span>)<span class="op">/</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">8</span><span class="op">+</span><span class="dv">0</span><span class="op">+</span><span class="dv">4</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="359">
<pre><code>{'A': 0.9475247524752475, 'B': 0.8571428571428571}</code></pre>
</div>
</div>
<p><strong><em>Step2: 시각화</em></strong></p>
<div id="5d9ae22f-71ef-472e-8919-387efc8dc825" class="cell" data-tags="[]" data-execution_count="344">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.pivot_table(index<span class="op">=</span>[<span class="st">'Player'</span>,<span class="st">'Season'</span>],columns<span class="op">=</span><span class="st">'Status'</span>,values<span class="op">=</span><span class="st">'Count'</span>)<span class="op">\</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>.<span class="bu">eval</span>(<span class="st">'Rate = Success/(Failure+Success)'</span>)[<span class="st">'Rate'</span>].reset_index()</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>ggplot(tidydata) <span class="op">+</span> geom_col(aes(x<span class="op">=</span><span class="st">'Player'</span>,y<span class="op">=</span><span class="st">'Rate'</span>,fill<span class="op">=</span><span class="st">'Player'</span>))<span class="op">+</span>facet_wrap(<span class="st">'Season'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-33-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="2a110e09-9c38-4387-8aa5-3088d0578edd" class="cell" data-tags="[]" data-execution_count="347">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>tidydata <span class="op">=</span> df.pivot_table(index<span class="op">=</span><span class="st">'Player'</span>,columns<span class="op">=</span><span class="st">'Status'</span>,values<span class="op">=</span><span class="st">'Count'</span>,aggfunc<span class="op">=</span><span class="st">'sum'</span>)<span class="op">\</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>.<span class="bu">eval</span>(<span class="st">'Rate = Success/(Failure+Success)'</span>)[<span class="st">'Rate'</span>].reset_index()</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>tidydata</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>ggplot(tidydata) <span class="op">+</span> geom_col(aes(x<span class="op">=</span><span class="st">'Player'</span>,y<span class="op">=</span><span class="st">'Rate'</span>,fill<span class="op">=</span><span class="st">'Player'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-34-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="histogram-equalization-5점" class="level2">
<h2 class="anchored" data-anchor-id="histogram-equalization-5점"><code>(2)</code> Histogram Equalization – 5점</h2>
<div id="b0e92d13-8f23-4190-8820-f09ce79fc2ee" class="cell" data-tags="[]" data-execution_count="22">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Unequalized_Hawkes_Bay_NZ.jpg/300px-Unequalized_Hawkes_Bay_NZ.jpg'</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>img_before <span class="op">=</span> np.array(PIL.Image.<span class="bu">open</span>(io.BytesIO(requests.get(url).content)))</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>img_after <span class="op">=</span> cv2.equalizeHist(img_before)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>,<span class="dv">0</span>].imshow(img_before,cmap<span class="op">=</span><span class="st">'gray'</span>,vmax<span class="op">=</span><span class="dv">255</span>,vmin<span class="op">=</span><span class="dv">0</span>)<span class="op">;</span> ax[<span class="dv">0</span>,<span class="dv">0</span>].set_title(<span class="st">"(a) before: image"</span>)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>,<span class="dv">1</span>].imshow(img_after,cmap<span class="op">=</span><span class="st">'gray'</span>,vmax<span class="op">=</span><span class="dv">255</span>,vmin<span class="op">=</span><span class="dv">0</span>)<span class="op">;</span> ax[<span class="dv">0</span>,<span class="dv">1</span>].set_title(<span class="st">"(b) after: image"</span>)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>,<span class="dv">0</span>].hist(img_before.reshape(<span class="op">-</span><span class="dv">1</span>), bins<span class="op">=</span><span class="dv">255</span>)<span class="op">;</span> ax[<span class="dv">1</span>,<span class="dv">0</span>].set_title(<span class="st">"(c) before: histogram"</span>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>,<span class="dv">1</span>].hist(img_after.reshape(<span class="op">-</span><span class="dv">1</span>), bins<span class="op">=</span><span class="dv">255</span>)<span class="op">;</span> ax[<span class="dv">1</span>,<span class="dv">1</span>].set_title(<span class="st">"(d) after: histogram"</span>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>fig.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-35-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>위의 그림을 올바르게 해석한 사람을 모두 고르라. (모두 맞출 경우만 정답으로 인정)</p>
<ul>
<li>유진: (a) 이미지의 값들은 (b) 이미지의 값들 보다 분산이 작을 것이다.</li>
<li>레이: (a) 이미지의 값은 대부분 130~150근처에 모여있어서 회색으로 보인다.</li>
<li>원영: 130~150 사이의 값들은 (b) 이미지 보다 (a) 이미지에서 훨씬 많은 빈도로 나타난다.</li>
<li>리즈: (a) 이미지를 (b) 이미지로 바꾸는 기법을 histogram equalization 이라고 하며, 그 원리는 (c)와 같은 히스토그램을 (d)와 같은 히스토그램으로 바꾸는 것이다.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
답
</div>
</div>
<div class="callout-body-container callout-body">
<p>모두 정답~</p>
</div>
</div>
</section>
<section id="엔스콤의-플랏-5점" class="level2">
<h2 class="anchored" data-anchor-id="엔스콤의-플랏-5점"><code>(3)</code> 엔스콤의 플랏 – 5점</h2>
<div id="a1602661-1b18-4c3d-80d2-c2052b98eb7e" class="cell" data-tags="[]" data-execution_count="24">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">14</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">12</span>, <span class="dv">7</span>, <span class="dv">5</span>]</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> [<span class="fl">8.04</span>, <span class="fl">6.95</span>, <span class="fl">7.58</span>, <span class="fl">8.81</span>, <span class="fl">8.33</span>, <span class="fl">9.96</span>, <span class="fl">7.24</span>, <span class="fl">4.26</span>, <span class="fl">10.84</span>, <span class="fl">4.82</span>, <span class="fl">5.68</span>]</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> [<span class="fl">9.14</span>, <span class="fl">8.14</span>, <span class="fl">8.74</span>, <span class="fl">8.77</span>, <span class="fl">9.26</span>, <span class="fl">8.10</span>, <span class="fl">6.13</span>, <span class="fl">3.10</span>, <span class="fl">9.13</span>, <span class="fl">7.26</span>, <span class="fl">4.74</span>]</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>y3 <span class="op">=</span> [<span class="fl">7.46</span>, <span class="fl">6.77</span>, <span class="fl">12.74</span>, <span class="fl">7.11</span>, <span class="fl">7.81</span>, <span class="fl">8.84</span>, <span class="fl">6.08</span>, <span class="fl">5.39</span>, <span class="fl">8.15</span>, <span class="fl">6.42</span>, <span class="fl">5.73</span>]</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>x4 <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">19</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>]</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>y4 <span class="op">=</span> [<span class="fl">6.58</span>, <span class="fl">5.76</span>, <span class="fl">7.71</span>, <span class="fl">8.84</span>, <span class="fl">8.47</span>, <span class="fl">7.04</span>, <span class="fl">5.25</span>, <span class="fl">12.50</span>, <span class="fl">5.56</span>, <span class="fl">7.91</span>, <span class="fl">6.89</span>]</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>fig, ((ax1,ax2),(ax3,ax4)) <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>ax1.plot(x,y1,<span class="st">'.'</span>) </span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"(a)"</span>)</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>ax2.plot(x,y2,<span class="st">'.'</span>) </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"(b)"</span>)</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>ax3.plot(x,y3,<span class="st">'.'</span>)<span class="op">;</span> ax3.plot(x[<span class="dv">2</span>],y3[<span class="dv">2</span>],<span class="st">'o'</span>,color<span class="op">=</span><span class="st">'C1'</span>) </span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">"(c)"</span>)</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>ax4.plot(x4,y4,<span class="st">'.'</span>)<span class="op">;</span> ax4.plot(x4[<span class="op">-</span><span class="dv">4</span>],y4[<span class="op">-</span><span class="dv">4</span>],<span class="st">'o'</span>,color<span class="op">=</span><span class="st">'C1'</span>)</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">"(d)"</span>)</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">"Anscombe's quartet"</span>,size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-36-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>위의 그림을 올바르게 해석한 사람을 모두 고르라. (모두 맞출경우만 정답으로 인정)</p>
<ul>
<li>유진: (a)-(d) 모두 양의 상관계수를 가진다.</li>
<li>레이: 이 중 상관계수값의 해석이 가장 적절한 자료는 (a)이다.</li>
<li>원영: (b)가 적절하지 않은 이유는 선형성이 가정되어 있지 않기 때문이며, (c)가 적절하지 않은 이유는 주황색점으로 표시된 점이 계수값을 크게 바꾸기 때문이다.</li>
<li>리즈: (d)의 경우 주황색점의 값 <span class="math inline">\((x,y)\)</span>을 <span class="math inline">\((-x,y)\)</span>로 바꾸게 된다면 상관계수의 부호가 음수가 될 것이다.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
답
</div>
</div>
<div class="callout-body-container callout-body">
<p>모두 정답~</p>
</div>
</div>
</section>
<section id="아이스크림을-많이-먹으면-걸리는-병-5점" class="level2">
<h2 class="anchored" data-anchor-id="아이스크림을-많이-먹으면-걸리는-병-5점"><code>(4)</code> 아이스크림을 많이 먹으면 걸리는 병 – 5점</h2>
<div id="19032366-cfb4-44fe-a0ee-33e09b749856" class="cell" data-tags="[]" data-execution_count="26">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span>pd.read_csv(<span class="st">'https://raw.githubusercontent.com/guebin/DV2022/master/posts/icecream.csv'</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>ggplot(data<span class="op">=</span>df.assign(temp<span class="op">=</span>pd.cut(df.temp,[<span class="op">-</span>np.inf,<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>,np.inf])))<span class="op">\</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="op">+</span>geom_point(aes(x<span class="op">=</span><span class="st">'icecream'</span>,y<span class="op">=</span><span class="st">'disease'</span>,color<span class="op">=</span><span class="st">'temp'</span>))<span class="op">\</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="op">+</span>geom_smooth(aes(x<span class="op">=</span><span class="st">'icecream'</span>,y<span class="op">=</span><span class="st">'disease'</span>,color<span class="op">=</span><span class="st">'temp'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.
/home/cgb2/anaconda3/envs/ag/lib/python3.10/site-packages/plotnine/stats/smoothers.py:330: PlotnineWarning: Confidence intervals are not yet implemented for lowess smoothings.</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="10wk-supp-mid-sol_files/figure-html/cell-37-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>아래의 그림을 보고 올바르게 해석한 사람을 모두 고르라. (모두 맞출경우만 정답으로 인정)</p>
<blockquote class="blockquote">
<p>그림에 대한 배경설명은 강의노트 “아이스크림을 많이 먹으면 걸리는 병”을 참고</p>
</blockquote>
<ul>
<li>원영: (아이스크림 판매량, 소아마비 반응수치)의 상관계수값은 양수이다.</li>
<li>가을: 온도를 통제하였을 경우 (아이스크림 판매량, 소아마비 반응수치)의 상관계수값은, 온도를 통제하지 않았을 경우 (아이스크림 판매량, 소아마비 반응수치)의 상관계수 값보다 작다.</li>
<li>이서: (온도, 소아마비 반응수치)의 상관계수 값은 양수이다.</li>
<li>레이: (온도, 아이스크림 판매량)의 상관계수 값은 양수이다.</li>
<li>유진: 온도가 유일한 은닉변수라면, 아이스크림 판매량과 소아마비 반응수치 사이에는 인과성이 없다고 볼 수 있다.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
답
</div>
</div>
<div class="callout-body-container callout-body">
<p>모두 정답~</p>
</div>
</div>
</section>
<section id="산점도의-해석들-5점" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="산점도의-해석들-5점"><code>(5)</code> 산점도의 해석들 – 5점</h2>
<p>아래는 <code>문제 4</code>에 제시된 산점도와 그 해석들이다. 옳은 해석을 모두 골라라.</p>
<p><strong>4-(1)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="10wk-supp-mid-sol_files/figure-html/4853654b-9ddb-4965-bf42-c03b55a51155-1-e6dae371-9291-4628-8ae6-cd09d7b26d5a.png" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">4-(1)의 그림</figcaption>
</figure>
</div>
<p><code>해석1</code>: 모든 포지션에 대하여, (Age,logValue)는 음의 상관계수값을 가지며 (Age,logWage)는 양의 상관계수값을 가진다.</p>
<p><strong>4-(2)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="10wk-supp-mid-sol_files/figure-html/29c4dc31-9970-43ff-bace-ee20ba8627cf-1-47d67bcc-5b2a-4448-87ff-7be1be2869d0.png" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">4-(2)의 그림</figcaption>
</figure>
</div>
<p><code>해석2</code>: [GKDiving,…,GKReflexes]는 모두 logWage와 양의 상관계수값을 가진다.</p>
<p><strong>4-(3)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="10wk-supp-mid-sol_files/figure-html/704cc867-21d4-4992-b18b-d3dee98300c0-1-0781c708-d427-405c-afde-64ee6f729a44.png" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">4-(3)의 그림</figcaption>
</figure>
</div>
<p><code>해석3</code>: GOALKEEPER 포지션의 경우 GKAbility를 이용하여 Overall을 추정하는 것이 합리적이지만 FORWARD 포지션의 경우 GKAbility를 이용하여 Overall을 추정하는 것은 합리적이지 않다.</p>
<p><strong>4-(4)</strong></p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="10wk-supp-mid-sol_files/figure-html/3a7394db-c77e-434f-b1d0-4270c09b9cf9-1-d48e8b31-62d1-42d3-9bf5-ba93a2bb4df3.png" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">4-(4)의 그림</figcaption>
</figure>
</div>
<p><code>해석4</code>: 수비수 포지션의 경우 FinishingSkills 과 logValue 사이의 상관계수 값은 거의 0에 가깝다.</p>
<blockquote class="blockquote">
<p>답: 해석1, 해석2, 해석3</p>
</blockquote>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
답
</div>
</div>
<div class="callout-body-container callout-body">
<p>해석1,해석2,해석3이 옳다.</p>
<p>해석4가 틀린이유: 상관계수가 0근처라면 FinishingSkill의 붉은 추세선이 x축과 거의 평행해야 한다.</p>
</div>
</div>


</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="guebin/DV2023" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>